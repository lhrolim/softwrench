<div ng-repeat="field in getDisplayables()" ng-show="!isFieldHidden(field)">

    <label class="item item-input">
        <span ng-show="isFieldRequired(field.requiredExpression)" class="requiredfieldmark">* </span>
        <span class="input-label">{{field.label}}</span>
        <ng-switch on="field.type">
            <div ng-switch-when="ApplicationAssociationDefinition">
                <ion-autocomplete ng-model="datamap[field.target]"
                                  component-id="{{field.associationKey}}"
                                  items-method="associationSearch(query,componentId)"
                                  item-value-key="{{getAssociationValueField(field)}}"
                                  item-view-value-key="{{getAssociationLabelField(field)}}" association-description/>

            </div>
            <div ng-switch-when="OptionField">
                {{datamap[field.target]}}
                <option-field header-text="{{field.label}}"
                              allow-empty='false'
                              value="datamap[field.target]"
                              text="Choose"
                              items="field.options"
                    />
            </div>
            <div ng-switch-default ng-switch on="field.rendererType">
                <textarea ng-switch-when="textarea" ng-model="datamap[field.attribute]" ng-readonly="field.isReadOnly" rows="10" wrap="hard"
                          data-ng-maxlength="{{field.rendererParameters['maxlength']}}"
                          maxlength="{{field.rendererParameters['maxlength']}}" ng-required="isFieldRequired(field.requiredExpression)"></textarea>

                <textarea ng-switch-when="richtext" ng-model="datamap[field.attribute]" ng-readonly="field.isReadOnly" rows="10" wrap="hard"
                          data-ng-maxlength="{{field.rendererParameters['maxlength']}}"
                          maxlength="{{field.rendererParameters['maxlength']}}" ng-required="isFieldRequired(field.requiredExpression)"></textarea>
                
                <input ng-switch-when="numericinput" type="number" ng-model="datamap[field.attribute]" ng-readonly="field.isReadOnly"
                       min="{{fieldMetadata.rendererParameters['min']}}"
                       max="{{setMaxNumericInput(datamap,fieldMetadata)}}" ng-required="isFieldRequired(field.requiredExpression)"/>
                  
                <input ng-switch-when="date" type="date" ng-model="datamap[field.attribute]" ng-readonly="field.isReadOnly" ng-required="isFieldRequired(field.requiredExpression)" dateconverter/>
                
                <input ng-switch-when="time" type="time" ng-model="datamap[field.attribute]" ng-readonly="field.isReadOnly" ng-required="isFieldRequired(field.requiredExpression)" dateconverter/>
                
                <input ng-switch-when="datetime" type="datetime-local" ng-model="datamap[field.attribute]" ng-readonly="field.isReadOnly" ng-required="isFieldRequired(field.requiredExpression)" dateconverter />
                
                <input ng-switch-default type="text" ng-model="datamap[field.attribute]" ng-readonly="field.isReadOnly" ng-required="isFieldRequired(field.requiredExpression)"/>
            </div>

            
        </ng-switch>

    </label>
</div>
