<?xml version="1.0" encoding="utf-8" ?>
<metadata xmlns="http://www.controltechnologysolutions.com/metadata">

  <templates>
    <!--Service Request-->
    <template path="@servicerequest.xml"/>
    <!--Inventory-->
    <template path="@inventory.xml"/>
  </templates>

  <applications>
    <application name="invissue" title="Issue Inventory" entity="invissue">
      <schemas>
        <schema id="newInvIssueDetail" mode="input" stereotype="detail" redeclaring="false">
          <customization position="location">
            <association showexpression="1!=1" label="Location" target="location" labelfield="location_.description" dependantfields="siteid" requiredexpression="(@refwo=='' || @refwo==undefined) &amp;&amp; (@assetnum== '' || @assetnum==undefined)">
              <renderer type="lookup"/>
              <event type="afterchange" service="inventoryService" method="invIssue_afterChangeLocation"/>
            </association>
          </customization>
          <customization position="assetnum">
            <association showexpression="1!=1" label="Asset" target="assetnum" labelfield="asset_.description" dependantfields="siteid" extraprojectionvalues="location" requiredexpression="(@refwo=='' || @refwo==undefined) &amp;&amp; (@location== '' || @location==undefined)">
              <renderer type="lookup"/>
              <event type="afterchange" service="inventoryService" method="invIssue_afterChangeAsset"/>
            </association>
          </customization>
          <customization position="gldebitacct">
            <association showexpression="1!=1" label="GL Debit Account" target="gldebitacct"  labelfield="glcomponents_.comptext" >
              <renderer type="modal" params="application=glcomponents;schema=detail;onsave=glcomponentService.getGLAccount" />
            </association>
          </customization>
        </schema>
      </schemas>
    </application>

    <application name="physicalcount" entity="physicalCount" title="Physical Count">
      <schemas>
        <schema stereotype="list" id="physicalcountList" title="Physical Count" redeclaring="true">
          <properties>
            <property key="config.fullKey" value="/Global/Grids/PhysicalCount/ScanBar"/>
          </properties>
          <commandbars>
            <commandgroup position="gridtop">
              <resourcecommand id="scanfilter" path="/Content/Templates/commands/scan/scanfilter.html" position="&lt;filter"/>
            </commandgroup>
          </commandbars>
          <field attribute="invbalancesid" hidden="true"/>
          <field attribute="itemnum" label="Item">
            <renderer type="default" params="widthMD=15%;widthLG=15%" />
          </field>
          <field attribute="inventory_.siteid" label="Site">
            <renderer type="default" params="widthXS=-1%" />
          </field>
          <field attribute="location" label="Storeroom">
            <renderer type="default" params="widthXS=-1%;widthSM=-1%" />
          </field>
          <field attribute="binnum" label="Bin">
            <renderer type="default" params="widthXS=-1%;widthSM=-1%" />
          </field>
          <event type="onload" service="scannerdetectionService" method="initSouthernPhysicalCountGridListener"/>
        </schema>
      </schemas>
    </application>
  </applications>
</metadata>