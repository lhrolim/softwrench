<?xml version="1.0" encoding="utf-8" ?>
<metadata xmlns="http://www.controltechnologysolutions.com/metadata">



  <templates>
    <template path="@person.xml"/>
    <template path="@workorder.xml"/>
    <template path="@location.xml"/>
    <template path="@workflow.xml"/>
    <template path="@relatedrecords.xml"/>
    <template path="@materials.xml"/>
    <template path="@item.xml"/>
    <template path="@worklogs.xml"/>
    <template path="@attachments.xml"/>
  </templates>
  



  <entities>


    <entity name="assignment" idAttribute="assignmentid">
      <attributes>
        <attribute name="wplaborid" type="varchar" required="false" />
        <attribute name="wonum" type="varchar" required="true" />
        <attribute name="craft" type="varchar" required="false" />
        <attribute name="laborhrs" type="float" required="false" />
        <attribute name="status" type="varchar" required="true" />
        <attribute name="scheduledate" type="datetime" required="false" />
        <attribute name="laborcode" type="varchar" required="false" />
        <attribute name="startdate" type="datetime" required="false" />
        <attribute name="finishdate" type="datetime" required="false" />
        <attribute name="orgid" type="varchar" required="true" />
        <attribute name="siteid" type="varchar" required="false" />
        <attribute name="assignmentid" type="bigint" required="true" />
        <attribute name="skilllevel" type="varchar" required="false" />
        <attribute name="contractnum" type="varchar" required="false" />
        <attribute name="vendor" type="varchar" required="false" />
        <attribute name="workdate" type="datetime" required="false" />
        <attribute name="parentassignid" type="bigint" required="false" />
        <attribute name="rowstamp" type="timestamp" required="true" />
        <attribute name="crewworkgroup" type="varchar" required="false" />
        <attribute name="amcrew" type="varchar" required="false" />
        <attribute name="amcrewtype" type="varchar" required="false" />
        <attribute name="apptrequired" type="smallint" required="true" />
        <attribute name="appointment" type="smallint" required="true" />
        <attribute name="worklog" type="smallint" required="true" />
        <attribute name="schedstartnotime" query="DATEADD(dd, DATEDIFF(dd, 0, scheduledate), 0)" type="date"/>
      </attributes>

      <connectorParameters>
        <connectorParameter key="dbtable" value="assignment" />
      </connectorParameters>

    </entity>


    <entity name="asset" idAttribute="assetuid">
      <attributes>
        <attribute name="openwo" query="(select count(1) from workorder where UPPER(workorder.status) not in ('CAN', 'COMP', 'CLOSE') and workorder.assetnum = !@assetnum and workorder.siteid = !@siteid and workorder.orgid = !@orgid)" type="int"/>
      </attributes>
    </entity>

    <entity name="workorder" idAttribute="workorderid">
      <attributes>
        <attribute name="schedstartnotime" query="(select DATEADD(dd, DATEDIFF(dd, 0, scheduledate), 0) from assignment where wonum = !@wonum and siteid = !@siteid and orgid = !@orgid and laborcode = @personid)" type="date"/>
        <attribute name="schedassigneddate" query="(select scheduledate from assignment where wonum = !@wonum and siteid = !@siteid and orgid = !@orgid and laborcode = @personid)" type="date"/>
        <attribute name="failurelist" query="(select failurelist from failurelist fl where fl.failurecode = !@failurecode and fl.orgid = !@orgid and fl.type is null)" type="varchar"/>
        <attribute name="problemlist" query="(select CONVERT(varchar(10), linenum) from failurereport fr where fr.wonum = !@wonum and fr.type='PROBLEM' and fr.orgid = !@orgid and fr.siteid = !@siteid)" type="varchar"/>
        <attribute name="fr1list" query="(select CONVERT(varchar(10), linenum) from failurereport fr where fr.wonum = !@wonum and fr.type='CAUSE' and fr.orgid = !@orgid and fr.siteid = !@siteid)" type="varchar"/>
<!--        <attribute name="fr1list" query="(select CONVERT(varchar(10), linenum) + ';' +  failurecode from failurereport fr where fr.wonum = !@wonum and fr.type='CAUSE' and fr.orgid = !@orgid and fr.siteid = !@siteid)" type="varchar"/>-->
        <attribute name="fr1code" query="(select failurecode from failurereport fr where fr.wonum = !@wonum and fr.type='CAUSE' and fr.orgid = !@orgid and fr.siteid = !@siteid)" type="varchar"/>
        <attribute name="fr2code" query="(select failurecode from failurereport fr where fr.wonum = !@wonum and fr.type='REMEDY' and fr.orgid = !@orgid and fr.siteid = !@siteid)" type="varchar"/>
        <attribute name="outreq" type="boolean"/>
      </attributes>
      <relationships>

        <relationship to="numericdomain" qualifier="realpriority" collection="true">
          <relationshipAttribute from="wopriority" to="value" primary="true"/>
          <relationshipAttribute to ="domainid" literal="WOPRIORITY" quoteLiteral="true"/>
        </relationship>


        <relationship to="problemlist" qualifier="offlineproblemlist">
          <relationshipAttribute from="problemcode" to="failurecode" primary="true"/>
          <relationshipAttribute from="failurelistonly_.failurelist" to="parent"/>
          <relationshipAttribute to="status" literal="ACTIVE" quoteLiteral="true"/>
        </relationship>

        <relationship to="causelist" qualifier="offlinecauselist">
          <relationshipAttribute from="fr1code" to="failurecode" primary="true"/>
          <relationshipAttribute from="offlineproblemlist_.failurelist" to="parent" />
          <relationshipAttribute to="status" literal="ACTIVE" quoteLiteral="true"/>
        </relationship>

        <relationship to="remedylist" qualifier="offlineremedylist">
          <relationshipAttribute from="fr2code" to="failurecode" primary="true"/>
          <relationshipAttribute from="offlinecauselist_.failurelist" to="parent" />
          <relationshipAttribute to="status" literal="ACTIVE" quoteLiteral="true" />
        </relationship>

        <relationship to="failurelistonly" qualifier="failurelistonly">
          <relationshipAttribute from="failurecode" to="failurecode" primary="true"/>
          <relationshipAttribute from="orgid" to="orgid" />
          <relationshipAttribute to="status" literal="ACTIVE" quoteLiteral="true"/>
        </relationship>

        <relationship to="asset" qualifier="offlineasset">
          <relationshipAttribute from="assetnum" to="assetnum" primary="true"/>
        </relationship>
        <relationship to="location" qualifier="offlinelocation" >
          <relationshipAttribute from="location" to="location" primary="true"/>
        </relationship>

        <relationship to="assignment" qualifier="assignment">
          <relationshipAttribute from="wonum" to="wonum" primary="true"/>
          <relationshipAttribute from="orgid" to="orgid" />
          <relationshipAttribute from="siteid" to="siteid"/>
        </relationship>

        <relationship to="worklog" collection="true" qualifier="wkpgworklogs">
          <relationshipAttribute from="wonum" to="recordkey" primary="true" />
          <relationshipAttribute from="siteid" to="siteid" />
          <relationshipAttribute to="class" literal="WORKORDER" quoteLiteral="true" />
          <relationshipAttribute query="(worklog.description like 'swwpkg:%')"/>
        </relationship>
        <relationship to="DOCLINKS" collection="true" qualifier="wkpgattachments">
          <relationshipAttribute from="workorderid" to="ownerid" primary="true"/>
          <relationshipAttribute to="ownertable" literal="WORKORDER" quoteLiteral="true"/>
          <relationshipAttribute query="(docinfo_.urlparam1 like 'swwpkg:%')"/>
        </relationship>
        <relationship to="DOCLINKS" collection="true" qualifier="wkpgcoattachments">
          <relationshipAttribute from="workorderid" to="ownerid" primary="true"/>
          <relationshipAttribute to="ownertable" literal="WORKORDER" quoteLiteral="true"/>
          <relationshipAttribute query="(docinfo_.urlparam1 like 'swwpkgco:%')"/>
        </relationship>
        <relationship to="DOCLINKS" collection="true" qualifier="wkpgmeattachments">
          <relationshipAttribute from="workorderid" to="ownerid" primary="true"/>
          <relationshipAttribute to="ownertable" literal="WORKORDER" quoteLiteral="true"/>
          <relationshipAttribute query="(docinfo_.urlparam1 like 'swwpkgme:%')"/>
        </relationship>
        <relationship to="DOCLINKS" collection="true" qualifier="wkpgallattachments">
          <relationshipAttribute from="workorderid" to="ownerid" primary="true"/>
          <relationshipAttribute to="ownertable" literal="WORKORDER" quoteLiteral="true"/>
          <relationshipAttribute query="(docinfo_.urlparam1 like 'swwpk%')"/>
        </relationship>
      </relationships>
    </entity>

    <entity name="offlineitem" parententity="item" useridAttribute="itemnum" idAttribute="itemid"
        whereclause="((select count(invx.inventoryid) from inventory invx where invx.itemnum = !@itemnum and invx.siteid=@siteid) > 0)">
    </entity>

    <entity name="matusetrans" idAttribute="matusetransid">
      <attributes>
        <attribute name="warranty" type="varchar"/>
      </attributes>
      <relationships>
        <relationship to="inventory" qualifier="offlineinventory">
          <relationshipAttribute from="itemnum" to="itemnum" primary="true"/>
          <relationshipAttribute to="status" literal="ACTIVE"/>
        </relationship>
        <relationship to="offlineitem">
          <relationshipAttribute from="itemnum" to="itemnum" primary="true"/>
          <relationshipAttribute from="itemsetid" to="itemsetid"/>
          <relationshipAttribute to="itemtype" literal="ITEM" quoteLiteral="true"/>
          <relationshipAttribute to="status" literal="ACTIVE" quoteLiteral="true"/>
          <relationshipAttribute to="rotating" literal="0" quoteLiteral="true"/>
        </relationship>
        <relationship to="location" qualifier="offlinelocation">
          <relationshipAttribute from ="storeloc" to="location" primary="true" />
          <relationshipAttribute to="type" literal="STOREROOM" quoteLiteral="true" />
          <relationshipAttribute to="status" literal="OPERATING" quoteLiteral="true" />
        </relationship>
        <relationship to="warranty">
          <relationshipAttribute from="warranty" to="value" primary="true"/>
          <relationshipAttribute to="domainid" literal="WARRANTY" quoteLiteral="true" />
        </relationship>
      </relationships>
    </entity>

    <entity name="warranty" parententity="alndomain" idAttribute="alndomainid" useridAttribute="domainid" whereclause="!@domainid='WARRANTY'">
    </entity>

    <entity name="locancestor" idAttribute="locancestorid">
      <attributes>
        <attribute name="locancestorid" type="bigint" required="true"/>
        <attribute name="location" type="varchar" required="true"/>
        <attribute name="ancestor" type="varchar" required="true"/>
        <attribute name="systemid" type="varchar" required="true"/>
        <attribute name="siteid" type="varchar" required="true"/>
        <attribute name="orgid" type="varchar" required="true"/>
        <attribute name="rowstamp" type="timestamp" required="true" />
      </attributes>
    </entity>

    <entity name="labtrans" idAttribute="labtransid">
      <attributes>
        <attribute name="warranty" type="varchar"/>
      </attributes>
      <relationships>
        <relationship to="warranty">
          <relationshipAttribute from="warranty" to="value" primary="true"/>
          <relationshipAttribute to="domainid" literal="WARRANTY" quoteLiteral="true" />
        </relationship>
      </relationships>
    </entity>

    <entity name="location" idAttribute="locationsid">
      <attributes>
        <attribute name="parent" query=" (SELECT parent FROM lochierarchy WHERE location = !@location AND siteid = !@siteid AND orgid = !@orgid) " type="varchar"/>
        <attribute name="hierarchy" query=" (SELECT '/' + ancestor + '/' FROM locancestor WHERE location = !@location AND ancestor != !@location AND siteid = !@siteid AND orgid = !@orgid FOR XML PATH('')) " type="varchar"/>
      </attributes>
    </entity>
  </entities>

  <applications>

    <options id="facilities">
      <option label="ACS1"  value="ACS01" extraprojections="site=1801;group=1801-ACS"/>
      <option label="AES1"  value="AES11" extraprojections="site=1803;group=1803-TPZ"/>
      <option label="AMH1"  value="AMH11" extraprojections="site=1808;group=1808-SAR"/>
      <option label="AMH2"  value="AMR03,AMR04" extraprojections="site=1808;group=1808-SAR"/>
      <option label="ALM1"  value="ALM01" extraprojections="site=1801;group=1801-CIM"/>
      <option label="ALP1"  value="ALP11" extraprojections="site=1803;group=1803-AVS"/>
      <option label="AVS1"  value="AVS11" extraprojections="site=1803;group=1803-AVS"/>
      <option label="AVV1"  value="AVV11" extraprojections="site=1801;group=1801-AVV"/>
      <option label="BEL1"  value="BEL11" extraprojections="site=1808;group=1808-SAR"/>
      <option label="BRS1"  value="BRS11" extraprojections="site=1801;group=1801-CIM"/>
      <option label="BWS1"  value="BWS11" extraprojections="site=1803;group=1803-TPZ"/>
      <option label="CBLA"  value="CBLA1" extraprojections="site=1801;group=1801-CIM"/>
      <option label="CCS1"  value="CCS11" extraprojections="site=1803;group=1803-TPZ"/>
      <option label="CGL1"  value="CGL11" extraprojections="site=1803;group=1803-TPZ"/>
      <option label="CID1"  value="CID11" extraprojections="site=1803;group=1803-TPZ"/>
      <option label="CIM1"  value="CIM01" extraprojections="site=1801"/>
      <option label="CVS1"  value="CVS11" extraprojections="site=1803;group=1803-SGSO"/>
      <option label="DSS1"  value="DSS11,DSS21" extraprojections="site=1803"/>
      <option label="GAL1"  value="GAL01" extraprojections="site=1801;group=1801-CIM"/>
      <option label="HON1"  value="HON01" extraprojections="site=1801;group=1801-CIM"/>
      <option label="IVS1"  value="IVS11" extraprojections="site=1803;group=1803-IVS"/>
      <option label="IVW1"  value="IVW11" extraprojections="site=1803;group=1803-IVS"/>
      <option label="KBSA"  value="KBSA1" extraprojections="site=1803;group=1803-KBS"/>
      <option label="KBSB"  value="KBSB1" extraprojections="site=1803;group=1803-KBS"/>
      <option label="KNS1"  value="KNS11" extraprojections="site=1803;group=1801-TPZ"/>
      <option label="KSS1"  value="KSS11" extraprojections="site=1803;group=1801-TPZ"/>
      <option label="LHS1"  value="LHS11" extraprojections="site=1803;group=1803-TPZ"/>
      <option label="LMS1"  value="LMS01" extraprojections="site=1801;group=1801-CIM"/>
      <option label="MAN1"  value="MAN11" extraprojections="site=1803;group=1801-CIM"/>
      <option label="MLK1"  value="MLK11" extraprojections="site=1801;group=1801-CIM"/>
      <option label="MSS1"  value="MSS11" extraprojections="site=1801;group=1801-CIM"/>
      <option label="NSS1"  value="NSS11" extraprojections="site=1803;group=1803-TPZ"/>
      <option label="ORS1"  value="ORS11" extraprojections="site=1803;group=1803-TPZ"/>
      <option label="OTE1"  value="OTE11" extraprojections="site=1801;group=1801-CIM"/>
      <option label="REE1"  value="REE01" extraprojections="site=1801;group=1801-CIM"/>
      <option label="SAR1"  value="SAR01,SAR02,SAR03,SAR04,SAR05,SAR06,SAR07,SAR08" extraprojections="site=1808;group=1808-SAR"/>
      <option label="SDVL"  value="SDVL1" extraprojections="site=1803;group=1801-CIM"/>
      <option label="SES1"  value="SES10" extraprojections="site=1803;group=1803-SGSO"/>
      <option label="SES2"  value="SES20" extraprojections="site=1803;group=1803-SGSO"/>
      <option label="SGAH"  value="SGAH1" extraprojections="site=1803;group=1803-SGSO"/>
      <option label="SGAK"  value="SGAK1" extraprojections="site=1803;group=1803-SGSO"/>
      <option label="SGSO"  value="SGSO1" extraprojections="site=1803;group=1803-SGSO"/>
      <option label="SLS1"  value="SLS11" extraprojections="site=1803;group=1803-SLS"/>
      <option label="SSN1"  value="SSN01" extraprojections="site=1801;group=1801-SSN"/>
      <option label="STT1"  value="STT01" extraprojections="site=1801;group=1801-CIM"/>
      <option label="TIL1"  value="TIL02" extraprojections="site=1808;group=1808-SAR"/>
      <option label="TPZ1"  value="TPZ11" extraprojections="site=1803;group=1803-TPZ"/>
    </options>


    <application name="assignment" title="Assignments" entity="assignment">
      <schemas>
        <list platform="mobile" title="WO - Assigned">
          <field attribute="wonum" label="Workorder Number" qualifier="title"/>
          <field attribute="laborcode" label="Labor" qualifier="featured"/>
          <field attribute="scheduledate" label="Scheduled Start Date" hidden="true"/>
          <field attribute="schedstartnotime" label="Scheduled Start Date" qualifier="featured"/>

        </list>


      </schemas>

      <properties>
        <property key="list.offline.text.indexlist" value="wonum,laborcode"/>
        <property key="list.offline.date.indexlist" value="schedstartnotime,scheduledate"/>
        <property key="offline.force.assoc.sync" value="true"/>
        <property key="offline.sync.avoidcaching" value="true"/>
        <property key="offline.sync.smalldataset" value="true"/>
      </properties>

    </application>


    <application name="workorder" title="Work Order" entity="workorder" role="workorders">



      <components>
        <componentdisplayable id="offlineworktypes">
          <optionfield attribute="worktype" requiredexpression="true" label="Work Type">
            <option value="AD" label="Administrative" extraprojections="type=PM"/>
            <option value="CC" label="Construction and Commissioning" extraprojections="type=CM"/>
            <option value="INSP" label="Inspection" extraprojections="type=PM"/>
            <option value="PM" label="Preventative Maintenance" extraprojections="type=PM"/>
            <option value="SR" label="Safety / Environmental Work " extraprojections="type=PM"/>
            <option value="TRAIN" label="Training" extraprojections="type=PM"/>
            <option value="TRAVL" label="Travel" extraprojections="type=PM"/>
            <option value="TRBLS" label="Troubleshoot" extraprojections="type=CM"/>
            <option value="WO" label="General Work Order" extraprojections="type=CM"/>
          </optionfield>
        </componentdisplayable>
      </components>


      <schemas>


        <!--#region online-->

        <schema id="workpackageschema" redeclaring="false" stereotype="detail" platform="web">
          <field attribute="wonum"/>
          <field attribute="workorderid"/>
          <field attribute="worktype"/>
          <field attribute="reportedby"/>
          <field attribute="reportdate"/>
          <field attribute="status"/>
          <field attribute="siteid"/>
          <field attribute="orgid"/>
          <field attribute="assetnum"/>
          <field attribute="jpnum"/>
          <field attribute="pmnum"/>
          <field attribute="owner"/>
          <field attribute="outreq"/>
          <field attribute="supervisor"/>
          <field attribute="schedstart"/>
          <field attribute="description"/>
          <field attribute="ld_.ldtext"/>
          <composition relationship="wkpgworklogs" label="">
            <collectionproperties allowupdate="false" allowcreation="false" orderbyfield="createdate desc" listschema="workpackagelist"/>
          </composition>
          <composition relationship="wkpgattachments" label="">
            <collectionproperties allowupdate="false" allowcreation="false" orderbyfield="createdate asc" listschema="workpackagelist"/>
          </composition>
          <composition relationship="wkpgcoattachments" label="">
            <collectionproperties allowupdate="false" allowcreation="false" orderbyfield="createdate asc" listschema="workpackagelist"/>
          </composition>
          <composition relationship="wkpgmeattachments" label="">
            <collectionproperties allowupdate="false" allowcreation="false" orderbyfield="createdate asc" listschema="workpackagelist"/>
          </composition>
          <composition relationship="wkpgallattachments" label="">
            <collectionproperties allowupdate="false" allowcreation="false" orderbyfield="createdate desc" listschema="workpackagelist"/>
          </composition>
        </schema>

        <schema id="workpackagelistschema" redeclaring="false" stereotype="list" platform="web">
          <field attribute="wonum"/>
          <field attribute="workorderid"/>
          <field attribute="worktype"/>
          <field attribute="status"/>
          <field attribute="description"/>
          <field attribute="outreq"/>
          <field attribute="schedstart"/>
        </schema>

        <schema id="workpackagesimplecomposition" abstract="true" title="Work Order Details" platform="web">
          <field attribute="workorderid" hidden="true"/>
          <field attribute="siteid" hidden="true"/>
          <field attribute="orgid" hidden="true"/>
          <field attribute="wonum" hidden="true"/>
          <field attribute="reportdate" hidden="true"/>

          <section id="compositions">
            <composition relationship="worklog" label="Work Logs" hidden="true">
              <collectionproperties allowupdate="true" allowcreation="@status!='CLOSE'" orderbyfield="modifydate desc"/>
            </composition>
            <composition relationship="attachment" label="Attachments" hidden="true">
              <collectionproperties allowupdate="false" allowcreation="@status!='CLOSE'" allowremoval="@status!='CLOSE'" prefilterfunction="BuildRelatedAttachmentsWhereClause"/>
            </composition>
          </section>
        </schema>

        <list redeclaring="false" platform="web">
          <filters>
            <optionfilter attribute="status" provider="synstatus_.description" displaycode="true" style="width:300px">
              <option xmlns="http://www.controltechnologysolutions.com/filters" label="Active" value="INPRG,APPR,WOEN,ENRV,HOLD,WAPPR" preselected="true" displaycode="false" tooltip="The status of active work orders. Matchs any work order of &quot;INPRG&quot;, &quot;APPR&quot;, &quot;WOEN&quot;, &quot;ENRV&quot;, &quot;HOLD&quot; or &quot;WAPPR&quot; status."/>
            </optionfilter>
            <optionfilter attribute="location" provider="@firstSolarPCSLocationHandler.HandlePCSLocationProvider" displaycode="false"
                          advancedfilterschema="location.locationfilter" allowblank="true" whereclause="@firstSolarPCSLocationHandler.HandlePCSLocation"/>
            <optionfilter attribute="classstructure_.description" provider="classstructure_.description" allowblank="true" whereclause="classstructure_.classstructureid in (!@#value)"/>
            <!--<optionfilter attribute="classstructure_.classificationid" provider="@GetWOClassStructureType" allowblank="true"/>-->
          </filters>


          <customization position="+description">
            <field attribute="classstructure_.description" label="Origination"></field>
          </customization>

          <properties>
            <property key="search.schemaid" value="search"/>
            <property key="list.noresultspreaction" value="advancedSearchService.woNoResultsPreAction"/>
          </properties>
        </list>

        <schema id="adetail" redeclaring="false" stereotype="detail">

          <properties>
            <property key="attachments.skiprelatedattachments" value="true"/>
          </properties>

          <customization position="assetnum">
            <association label="Asset" target="assetnum" labelfield="asset_.description" extraprojectionvalues="location" requiredexpression="true">
              <renderer type="lookup" params="application=asset;schemaId=assetLookupList;"/>
              <dataprovider prefilterfunction="FilterAssets"/>
              <event type="afterchange" service="genericTicketService" method="afterChangeAsset"/>
            </association>
          </customization>


          <customization position="location">
            <section orientation="horizontal">
              <association label="Location" target="location" labelfield="location_.description"  dependantfields="siteid" enableexpression="!@siteid != null" requiredexpression="true">
                <event type="beforechange" service="genericTicketService" method="beforeChangeLocation"/>
                <renderer type="lookup" />
              </association>
            </section>
          </customization>
          <customization position="classstructureid">
            <optionfield attribute="classstructureid" label="Origination" providerattribute="_WOClassStructureType" requiredexpression="true">
              <renderer type="autocompleteclient" params="inputsize=large" />
            </optionfield>
          </customization>



          <customization position="worktype">
            <association label="Work Type" target="worktype" labelfield="worktype_.wtypedesc" orderbyfield="worktype asc" requiredexpression="true" >
              <renderer type="lookup" params="inputsize=small"/>
            </association>
          </customization>
        </schema>

        <schema id="newdetail" redeclaring="false" stereotype="detailnew" platform="web" parentschema="adetail">
          <customization position="classstructureid">
            <optionfield attribute="classstructureid" label="Origination" providerattribute="_WOClassStructureType" requiredexpression="true">
              <renderer type="autocompleteclient" params="inputsize=large" />
            </optionfield>
          </customization>
          <properties>
            <property key="detail.enabledfields" value="description,ld_.ldtext,location,classstructureid,worktype,newattachment,assetnum,siteid"/>
            <property key="search.schemaid" value="search"/>
          </properties>
        </schema>

        <schema id="editdetail" redeclaring="false" stereotype="detail" platform="web" parentschema="adetail">
          <customization position="matusetrans"/>
          <customization position="labtrans"/>
          <customization position="tooltrans"/>
          <properties>
            <property key="detail.enabledfields" value="description,ld_.ldtext,location,classstructureid,worktype,worklog,woactivity,commlog,attachment,assetmeter,locationmeter,relatedrecord,assetnum"/>
            <property key="search.schemaid" value="search"/>
          </properties>
          <commandbars>
            <commandgroup position="actions">
              <command id="createworkpackage" position="+createrelated" icon="fa-arrow-circle-down" label="Create Work Package"
                       parameters="schema,datamap"
                       service="workorderService" method="createWorkPackage" cssclasses="large-button" enableexpression="$scope:enableSave" showexpression="@worktype!=null &amp;&amp; @worktype.equalsIc('PM','CM','WO')"/>
            </commandgroup>
          </commandbars>
          
        </schema>

        <schema id="readonlyfixedlist" stereotype="list.modal.readonly" platform="web">
          <field attribute="wonum" label="WO#" >
            <renderer type="default"/>
          </field>
          <field attribute="description" label="Summary">
            <renderer type="default" />
          </field>
          <field attribute="location" label="Location">
            <renderer type="default" />
          </field>
          <field attribute="status" label="Status">
            <renderer type="statuscolor" params="grid=workorder;column=status" />
          </field>
        </schema>

        <schema id="relatedwoconfirmationlist" parentschema="readonlyfixedlist" stereotype="list.modal.confirm" platform="web">
          <properties>
            <property key="commandbar.bottom" value="bottom.confirmation"/>
          </properties>
        </schema>


        <schema id="workordercreationmodal" title="Fill In Workorder Details" stereotype="detail.modal" redeclaring="false" platform="web">
          <customization position="classstructureid">
            <optionfield attribute="classstructureid" label="Origination" providerattribute="_WOClassStructureType" requiredexpression="true">
              <renderer type="autocompleteclient" />
            </optionfield>
            <association label="Work Type" target="worktype" labelfield="worktype_.wtypedesc" orderbyfield="worktype asc" requiredexpression="true">
              <renderer type="lookup"/>
            </association>
          </customization>
        </schema>

        <schema id="batchshared" title="Workorder Common Fields" stereotype="detail.modal" platform="web">
          <field attribute="summary" label="Summary:" requiredexpression="true"/>
          <field attribute="details" label="Details:">
            <renderer type="textarea"/>
          </field>
          <optionfield attribute="classificationid" label="Origination" providerattribute="_WOClassStructureType" requiredexpression="true">
            <renderer type="autocompleteclient" />
          </optionfield>
          <association label="Work Type" target="worktype" labelfield="worktype_.wtypedesc" orderbyfield="worktype asc" requiredexpression="true">
            <renderer type="lookup"/>
          </association>

          <properties>
            <property key="addassociationlabels" value="true"/>
          </properties>
        </schema>

        <schema id="batchLocationSpreadSheet" title="Workorder Creation" stereotype="list.selection.spreadsheet" platform="web">
          <field attribute="location" hidden="true"/>
          <field attribute="workorderid" hidden="true"/>
          <field attribute="classificationid" hidden="true"/>
          <field attribute="orgid" hidden="true"/>
          <field attribute="#warning" tooltip="There are already one or more workorders associated with this location, click here to view them">
            <renderer type="icon" params="expression={'true':'fa-warning','false':''};width=10%;updatable=true;hideValueOnTooltip=true" />
          </field>
          <field attribute="specificLabel" label="Location"/>
          <field attribute="summary" label="Summary:" requiredexpression="true">
            <renderer type="default" params="updatable=true"  />
          </field>
          <field attribute="details" label="Details:" requiredexpression="true">
            <renderer type="textarea" params="updatable=true;limit=20"/>
          </field>
          <field attribute="classification" label="Origination">
            <renderer type="default" params="updatable=true"/>
          </field>
          <field attribute="worktype" label="Work Type">
            <renderer type="default" params="updatable=true"/>
          </field>
          <field attribute="siteid" label="SiteId">
            <renderer type="default" params="updatable=true"/>
          </field>
          <properties>
            <property key="list.click.service" value="batchWorkorderService.spreadSheetLineClick"/>
            <property key="list.click.schema" value="batchLocationInlineEdit"/>
            <property key="list.click.popupmode" value="modal"/>
            <property key="search.schemaid" value="search"/>
          </properties>

          <commandbars>
            <commandgroup id="#spreadsheet">
              <!--TODO: review framework to eventually avoid the need for these commands later-->
              <command id="cancel" service="redirectService" method="goToApplication" parameters="location,list" cssclasses="large-button"/>
              <command id="save" service="batchWorkorderService" method="submitBatch" parameters="location" primary="true" cssclasses="large-button"/>
            </commandgroup>
          </commandbars>
        </schema>


        <schema id="batchAssetSpreadSheet" title="Workorder Creation" stereotype="list.selection.spreadsheet" platform="web">
          <field attribute="workorderid" hidden="true"/>
          <field attribute="classificationid" hidden="true"/>
          <field attribute="orgid" hidden="true"/>
          <field attribute="#warning" tooltip="There are already one or more workorders associated with this asset, click here to view them">
            <renderer type="icon" params="expression={'true':'fa-warning','flase':''};width=10%;updatable=true;hideValueOnTooltip=true"/>
          </field>
          <field attribute="assetnum" label="Asset" readonly="true"/>
          <field attribute="specificLabel" label="Asset"/>
          <!--Location field come from the selected asset-->
          <field attribute="location" label="Location"/>
          <field attribute="summary" label="Summary:" requiredexpression="true">
            <renderer type="default" params="updatable=true"  />
          </field>
          <field attribute="details" label="Details:" requiredexpression="true">
            <renderer type="textarea" params="updatable=true;limit=20"/>
          </field>
          <field attribute="classification" label="Origination">
            <renderer type="default" params="updatable=true"/>
          </field>
          <field attribute="worktype" label="Work Type">
            <renderer type="default" params="updatable=true"/>
          </field>
          <field attribute="siteid" label="SiteId">
            <renderer type="default" params="updatable=true"/>
          </field>

          <properties>
            <property key="list.click.service" value="batchWorkorderService.spreadSheetLineClick"/>
            <property key="list.click.schema" value="batchAssetInlineEdit"/>
            <property key="list.click.popupmode" value="modal"/>
            <property key="search.schemaid" value="search"/>
          </properties>

          <commandbars>
            <commandgroup id="#spreadsheet">
              <!--TODO: review framework to eventually avoid the need for these commands later-->
              <command id="cancel" service="redirectService" method="goToApplication" parameters="asset,list" cssclasses="large-button"/>
              <command id="save" service="batchWorkorderService" method="submitBatch" parameters="asset" primary="true" cssclasses="large-button"/>
            </commandgroup>
          </commandbars>
        </schema>


        <schema id="batchLocationInlineEdit" title="Edit Workorder" stereotype="detail.modal" platform="web">
          <field attribute="workorderid" hidden="true"/>
          <field attribute="userIdFieldName" hidden="true"/>
          <field attribute="specificLabel" label="Location" readonly="true"/>
          <field attribute="siteid" label ="Site" readonly="true"/>
          <field attribute="summary" label="Summary:" requiredexpression="true">
            <renderer type="default" params="updatable=true"  />
          </field>
          <field attribute="details" label="Details:">
            <renderer type="textarea" params="updatable=true"/>
          </field>

          <optionfield attribute="classificationid" label="Origination" providerattribute="_WOClassStructureType" requiredexpression="true">
            <renderer type="autocompleteclient" />
          </optionfield>
          <association label="Work Type" target="worktype" labelfield="worktype_.wtypedesc" orderbyfield="worktype asc" requiredexpression="true">
            <renderer type="lookup"/>
          </association>

          <properties>
            <property key="addassociationlabels" value="true"/>
          </properties>

          <commandbars>
            <commandgroup position="modal.detail.primary">
              <command id="save" icon="fa-check" service="batchWorkorderService" method="woInlineEditSave" parameters="datamap,schema" label="Save" primary="true"/>
            </commandgroup>
          </commandbars>
        </schema>


        <schema id="batchAssetInlineEdit" title="Edit Workorder" stereotype="detail.modal" platform="web">
          <field attribute="workorderid" hidden="true"/>
          <field attribute="userIdFieldName" hidden="true"/>
          <field attribute="specificLabel" label="Asset" readonly="true"/>
          <field attribute="location" label="Location" readonly="true"/>
          <field attribute="siteid" label ="Site" readonly="true"/>
          <field attribute="summary" label="Summary:" requiredexpression="true">
            <renderer type="default" params="updatable=true"  />
          </field>
          <field attribute="details" label="Details:">
            <renderer type="textarea" params="updatable=true"/>
          </field>
          <optionfield attribute="classificationid" label="Origination" providerattribute="_WOClassStructureType" requiredexpression="true">
            <renderer type="autocompleteclient" />
          </optionfield>
          <association label="Work Type" target="worktype" labelfield="worktype_.wtypedesc" orderbyfield="worktype asc" requiredexpression="true">
            <renderer type="lookup"/>
          </association>

          <properties>
            <property key="addassociationlabels" value="true"/>
          </properties>

          <commandbars>
            <commandgroup position="modal.detail.primary">
              <command id="save" icon="fa-check" service="batchWorkorderService" method="woInlineEditSave" parameters="datamap,schema" label="Save" primary="true"/>
            </commandgroup>
          </commandbars>
        </schema>

        <schema id="search" title="Location Search" stereotype="search" platform="web">
          <field attribute="status" hidden="true" default="INPRG,APPR,WOEN,ENRV,HOLD,WAPPR" searchoperation="eq"/>
          <field attribute="fslocationsearch" hidden="true" default="false" searchoperation="eq"/>
          <field attribute="fsincludesubloc" label="Include Sublocations?" defaultexpression="false" searchoperation="eq">
            <renderer type="checkbox" params="layout=left"/>
          </field>
          <optionfield attribute="fsfacility" label="Facility" requiredexpression="true" searchoperation="eq" default="">
            <option label="ACS1"  value="ACS01" extraprojections="site=1801"/>
            <option label="AES1"  value="AES11"/>
            <option label="AMH1"  value="AMH11"/>
            <option label="AMH2"  value="AMR03,AMR04"/>
            <option label="ALM1"  value="ALM01"/>
            <option label="ALP1"  value="ALP11"/>
            <option label="AVS1"  value="AVS11"/>
            <option label="AVV1"  value="AVV11"/>
            <option label="BEL1"  value="BEL11"/>
            <option label="BRS1"  value="BRS11"/>
            <option label="BWS1"  value="BWS11"/>
            <option label="CBLA"  value="CBLA1"/>
            <option label="CCS1"  value="CCS11"/>
            <option label="CGL1"  value="CGL11"/>
            <option label="CID1"  value="CID11"/>
            <option label="CIM1"  value="CIM01"/>
            <option label="CVS1"  value="CVS11"/>
            <option label="DSS1"  value="DSS11,DSS21"/>
            <option label="GAL1"  value="GAL01"/>
            <option label="HON1"  value="HON01"/>
            <option label="IVS1"  value="IVS11"/>
            <option label="IVW1"  value="IVW11"/>
            <option label="KBSA"  value="KBSA1"/>
            <option label="KBSB"  value="KBSB1"/>
            <option label="KNS1"  value="KNS11"/>
            <option label="KSS1"  value="KSS11"/>
            <option label="LHS1"  value="LHS11"/>
            <option label="LMS1"  value="LMS01"/>
            <option label="MAN1"  value="MAN11"/>
            <option label="MLK1"  value="MLK11"/>
            <option label="MSS1"  value="MSS11"/>
            <option label="NSS1"  value="NSS11"/>
            <option label="ORS1"  value="ORS11"/>
            <option label="OTE1"  value="OTE11"/>
            <option label="REE1"  value="REE01"/>
            <option label="SAR1"  value="SAR01,SAR02,SAR03,SAR04,SAR05,SAR06,SAR07,SAR08"/>
            <option label="SDVL"  value="SDVL1"/>
            <option label="SES1"  value="SES10"/>
            <option label="SES2"  value="SES20"/>
            <option label="SGAH"  value="SGAH1"/>
            <option label="SGAK"  value="SGAK1"/>
            <option label="SGSO"  value="SGSO1"/>
            <option label="SLS1"  value="SLS11"/>
            <option label="SSN1"  value="SSN01"/>
            <option label="STT1"  value="STT01"/>
            <option label="TIL1"  value="TIL02"/>
            <option label="TPZ1"  value="TPZ11"/>
            <event type="afterchange" service="advancedSearchService" method="facilitySelected"/>
          </optionfield>
          <optionfield attribute="fslocint" label="Locations of Interest" providerattribute="_FsLocationsOfInterest" searchoperation="eq">
            <renderer type="combo" params="multiple=true"/>
          </optionfield>
          <optionfield attribute="fsswitchgear" label="Switchgear Locations" providerattribute="_FsSwitchgearLocations" searchoperation="eq">
            <renderer type="combo" params="multiple=true"/>
          </optionfield>
          <optionfield attribute="fspcslocations" providerattribute="_FsPcsLocations" searchoperation="eq">
            <renderer type="combodropdown" params="multiple=true;showvaluesbelow=true;buttontext=Select PCS(s);maxheight=300;labelmaxlength=30;customdropdownfunction=advancedSearchService.customizeComboDropdown"/>
          </optionfield>

          <commandbars>
            <commandgroup position="detailform" platform="web">
              <removecommand id="save"/>
              <removecommand id="print"/>
              <removecommand id="cancel"/>
              <command id="search" primary="true" icon="fa-search" service="dispatcherService" method="dispatchevent" label="Search" parameters="sw.crud.search,schema,datamap"/>
              <command id="clear" icon="fa-eraser" service="dispatcherService" method="dispatchevent" label="Clear" parameters="sw.crud.search.clear,schema,datamap"/>
              <command id="new" cssclasses="searchbutton" icon="fa-plus" service="advancedSearchService" method="newWorkOrder" label="New WO" parameters="schema,datamap"/>
            </commandgroup>
          </commandbars>

          <properties>
            <property key="search.panelwidth" value="180"/>
            <property key="crud.disableautofocus" value="true"/>
            <property key="search.startexpanded" value="true"/>
          </properties>
        </schema>

        <!--#endregion-->

        <!-- #region: Mobile -->

        <list platform="mobile" title="WO - Assigned" redeclaring="true">
          <filters>
            <datefilter attribute="#assignment_.scheduledate" label="Scheduled Start Date"/>
            <optionfilter attribute="wopriority" provider="realpriority_.description" />
            <optionfilter attribute="location" label="Facility" whereclause="@fsWorkorderOfflineService.getFacilityFilterWhereClause" provider="@fsWorkorderOfflineService.getFacilityFilterOptions"/>
          </filters>

          <field attribute="location" label="Location"/>
          <field attribute="wonum" label="Work Order Number" qualifier="title"/>
          <field attribute="wopriority" label="Priority" qualifier="icon"/>
          <field attribute="#assignment_.laborcode" qualifier="subtitle"/>
          <field attribute="#assignment_.scheduledate" label="Scheduled Start Date" hidden="true"/>
          <field attribute="#assignment_.schedstartnotime" label="Scheduled Start Date" qualifier="featured">
            <renderer type="date"/>
          </field>
          <field attribute="description" label="Description" qualifier="excerpt"/>
          <!-- TODO: had to add it here because the value was not being fetched on sync. Find out why, fix it, remove this field -->
          <field attribute="worktype" label="Work Type" />

          <properties>
            <property key="list.defaultorderby" value="#assignment_.schedstartnotime is null asc, #assignment_.schedstartnotime desc, wopriority desc"/>
          </properties>
        </list>

        <schema id="basedetail" title="Work Order" abstract="true" stereotype="detail" platform="mobile">
          <reference id="detailhiddensoffline"/>
<!--          <field attribute="failurelistonly_.failurelist" hidden="true"></field>-->
          <field attribute="failurelist" hidden="true"></field>
          <field attribute="problemlist" hidden="true"></field>
          <field attribute="fr1list" hidden="true"></field>

          <field attribute="assetnum" label="Asset" requiredexpression="true">
            <renderer type="custom" params="resourcepath=Content/Customers/firstsolar_offline/templates/fslocationdrilldownbutton.html"/>
          </field>
          <field attribute="location" label="Location" requiredexpression="true" hidden="true"/>

          <!-- do not remove - added to force the sync of assets -->
          <association label="Asset" target="assetnum" labelfield="offlineasset.description" showexpression="false"/>

          <!-- do not remove - added to force the sync of numeric domains for priorities -->
          <association label="Priority" target="wopriority" labelfield="realpriority_.description" showexpression="false"/>

          <association label="Status" target="status" labelfield="synstatus.description">
            <dataprovider prefilterfunction="FilterStatusCodes"/>
          </association>

          <field attribute="description" label="Description" requiredexpression="true"/>
          <field label="Details" attribute="ld_.ldtext">      
            <renderer type="richtext"/>
          </field>

          <association label="Origination" target="classstructureid" labelfield="classstructure_.description" requiredexpression="true">
            <renderer type="lookup" params="showCode=false"/>
          </association>

          <reference id="offlineworktypes"/>

          <field label="Warranty Claim Number" attribute="WOLO10"/>
          <field label="EPCR Number" attribute="EPCR_NUM"/>

          <field label="JP Number" attribute="jobplan_.description" enableexpression="false" readonly="true"/>

          <association label="Failure Class" target="failurecode" labelfield="failurelistonly_.description" requiredexpression="@worktype_.type == 'CM' &amp;&amp; @status==='COMP'" extraprojectionvalues="failurelist">
            <event type="afterchange" service="fsWorkorderOfflineService" method="afterFailureChanged"/>
          </association>

          <!-- Region Problems, cuase Remedy -->
          <association label="Problem Code" enableexpression="@failurecode!=null" target="problemcode" labelfield="offlineproblemlist_.description" requiredexpression="@worktype_.type == 'CM' &amp;&amp; @status==='COMP'" extraprojectionvalues="failurelist" >
            <event type="afterchange" service="fsWorkorderOfflineService" method="afterProblemChanged"/>
          </association>

          <association label="Cause" enableexpression="@problemcode!=null" target="fr1code" labelfield="offlinecauselist_.description" requiredexpression="@worktype_.type == 'CM' &amp;&amp; @status==='COMP'"
                       extraprojectionvalues="failurelist">
            <event type="afterchange" service="fsWorkorderOfflineService" method="afterCauseChanged"/>
          </association>

          <association label="Remedy" enableexpression="@fr1code!=null" target="fr2code" labelfield="offlineremedylist_.description" requiredexpression="@worktype_.type == 'CM' &amp;&amp; @status==='COMP'"
                       extraprojectionvalues="failurelist">
            <event type="afterchange" service="fsWorkorderOfflineService" method="afterRemedyChanged"/>
          </association>

          <composition relationship="matusetrans" label="Materials" >
            <collectionproperties allowupdate="false" allowcreation="@status!=='CLOSE'"/>
          </composition>
          <composition relationship="labtrans" label="Labors">
            <event type="beforedelete" service="laborService" method="confirmPossibleTimer"/>
            <event type="afterdelete" service="laborService" method="cancelPossibleTimer"/>
            <collectionproperties allowupdate="false" allowcreation="@status!=='CLOSE'" />
          </composition>
          <composition relationship="attachment" label="Attachments">
            <collectionproperties prefilterfunction="BuildRelatedAttachmentsWhereClause"/>
          </composition>
        </schema>

        <detail platform="mobile" title="Work Order" redeclaring="true" stereotype="detail" parentschema="basedetail">
          <event type="onload" service="fsWorkorderOfflineService" method="onDetailLoad"/>
          <commandbars>
            <commandgroup platform="mobile" position="mobile.fab">
              <container id="detail.container" position="detail.container" icon="fa-bolt">
                <!-- TODO: currently no support for merging command containers so repeating base commands -->
                <command id="quicksync"
                         service="itemActionService" method="quickSyncCurrentItem"
                         showexpression="service:itemActionService.shouldAllowQuickSyncForCurrentItem"
                         icon="ion-loop" label="Quick Sync"/>
                <command id="restoreitem"
                         service="itemActionService" method="deleteOrRestoreCurrentItem"
                         showexpression="service:itemActionService.shouldAllowDeleteOrRestoreForCurrentItem"
                         icon="ion-trash-a" label="Delete/Restore" cssclasses="red" />

                <command id="startlabtrans" service="laborService" method="startLaborTransaction"
                         showexpression="service:laborService.shouldAllowLaborStart"
                         icon="ion-play" label="Start Labor Report" cssclasses="green"/>
                <command id="finishlabtrans" service="laborService" method="finishLaborTransaction"
                         showexpression="service:laborService.shouldAllowLaborFinish"
                         icon="ion-stop" label="Finish Labor Report" cssclasses="red" />
              </container>
            </commandgroup>
          </commandbars>
        </detail>

        <schema id="newdetail" title="Work Order" stereotype="detailnew" platform="mobile" redeclaring="true" parentschema="basedetail">
          <event type="onload" service="fsWorkorderOfflineService" method="onNewDetailLoad"/>
        </schema>
        <!-- #endregion -->

      </schemas>

      <properties>
        <property key="list.offline.text.indexlist" value="wonum,wopriority,description,location"/>
        <property key="list.offline.date.indexlist" value="schedstartnotime"/>
        <property key="mobile.icon.provider" value="laborTimerIconProvider"/>
        <property key="attachments.skiprelatedattachments" value="true"/>
      </properties>
    </application>

    <application name="labtrans" entity="labtrans" title="Labor">
      <schemas>
        <detail stereotype="detail" title="Labor Reporting" platform="mobile" redeclaring="false">
          <customization position="+regularhrs">
            <association label="Warranty" target="warranty" labelfield="warranty_.description" default="NO WARRANTY" requiredexpression="true"/>
          </customization>
        </detail>
      </schemas>
    </application>

    <application name="otherworkorder" title="Work Order" entity="workorder" role="workorders">
      <components>
        <componentdisplayable id="detailhiddensoffline">
          <field attribute="workorderid" hidden="true"/>
          <field attribute="orgid" hidden="true" />
          <field attribute="siteid" hidden="true"/>
          <field attribute="woclass" hidden="true"/>
          <field attribute="hasfollowupwork" hidden="true"/>
          <field attribute="worktype" hidden="true"/>
          <field attribute="origrecordid" hidden="true"/>
          <field attribute="origrecordclass" hidden="true"/>
          <field attribute="wonum" hidden="true" />
          <field attribute="reportdate" label="Reported On" default="@now" hidden="true"/>
          <field attribute="changeby" label="Changed By" hidden="true"/>
<!--          <field attribute="failurelistonly_.failurelist" hidden="true"></field>-->
          <field attribute="problemlist" hidden="true"></field>
          <field attribute="failurelist" hidden="true"></field>
          <field attribute="fr1list" hidden="true"></field>
        </componentdisplayable>

        <componentdisplayable id="offlineworktypes">

          <optionfield attribute="worktype" requiredexpression="true" label="Work Type">
            <option value="AD" label="Administrative" extraprojections="type=PM"/>
            <option value="CC" label="Construction and Commissioning" extraprojections="type=CM"/>
            <option value="INSP" label="Inspection" extraprojections="type=PM"/>
            <option value="PM" label="Preventative Maintenance" extraprojections="type=PM"/>
            <option value="SR" label="Safety / Environmental Work " extraprojections="type=PM"/>
            <option value="TRAIN" label="Training" extraprojections="type=PM"/>
            <option value="TRAVL" label="Travel" extraprojections="type=PM"/>
            <option value="TRBLS" label="Troubleshoot" extraprojections="type=CM"/>
            <option value="WO" label="General Work Order" extraprojections="type=CM"/>
          </optionfield>
        </componentdisplayable>

      </components>

      <properties>
        <property key="list.offline.text.indexlist" value="wonum,wopriority,description,location"/>
        <property key="mobile.icon.provider" value="laborTimerIconProvider"/>
      </properties>

      <schemas>
        <list platform="mobile" title="WO - Group">

          <filters>
            <datefilter attribute="#assignment_.scheduledate" label="Scheduled Start Date"/>
            <optionfilter attribute="wopriority" provider="realpriority_.description" />
            <optionfilter attribute="location" label="Facility" whereclause="@fsWorkorderOfflineService.getFacilityFilterWhereClause" provider="@fsWorkorderOfflineService.getFacilityFilterOptions"/>
            <filter attribute="#assignment_.laborcode" label="Labor"/>
          </filters>

          <field attribute="location" hidden="true"/>
          <field attribute="wonum" label="Work Order Number" qualifier="title"/>
          <field attribute="wopriority" label="Priority" qualifier="icon"/>
          <field attribute="description" label="Description" qualifier="excerpt"/>
          <field attribute="#assignment_.laborcode" qualifier="subtitle"/>
          <field attribute="#assignment_.scheduledate" label="Scheduled Start Date" hidden="true"/>
          <field attribute="#assignment_.schedstartnotime" label="Scheduled Start Date" qualifier="featured">
            <renderer type="date"/>
          </field>

          <properties>
            <property key="list.defaultorderby" value="#assignment_.schedstartnotime is null asc, #assignment_.schedstartnotime desc, wopriority desc"/>
            <property key="list.offline.create.disabled" value="true"/>
          </properties>
        </list>

        <detail platform="mobile" title="Work Order" stereotype="detail">
          <reference id="detailhiddensoffline"/>


          <field attribute="assetnum" label="Asset" requiredexpression="true">
            <renderer type="custom" params="resourcepath=Content/Customers/firstsolar_offline/templates/fslocationdrilldownbutton.html"/>
          </field>
          <field attribute="location" label="Location" requiredexpression="true" hidden="true"/>

          <!-- do not remove - added to force the sync of numeric domains for priorities -->
          <association label="Priority" target="wopriority" labelfield="realpriority_.description" showexpression="false"/>


          <association label="Status" target="status" labelfield="synstatus.description" >
            <dataprovider prefilterfunction="FilterStatusCodes"/>
          </association>

          <field attribute="description" label="Description" requiredexpression="true"/>
          <field label="Details" attribute="ld_.ldtext">
            <renderer type="richtext"/>
          </field>

          <!--          <optionfield attribute="classstructureid" label="Origination" providerattribute="_WOClassStructureType" requiredexpression="true"/>-->

          <association label="Origination" target="classstructureid" labelfield="classstructure_.description" requiredexpression="true">
            <renderer type="lookup" params="showCode=false"/>
          </association>



          <reference id="offlineworktypes"/>



          <field label="Warranty Claim Number" attribute="WOLO10"/>
          <field label="EPCR Number" attribute="EPCR_NUM"/>

          <field label="JP Number" attribute="jobplan_.description" enableexpression="false" readonly="true"/>

          <association label="Failure Class" target="failurecode" labelfield="failurelistonly_.description" requiredexpression="@worktype_.type == 'CM' &amp;&amp; @status==='COMP'" extraprojectionvalues="failurelist">
            <event type="afterchange" service="fsWorkorderOfflineService" method="afterFailureChanged"/>
          </association>

          <!-- Region Problems, cuase Remedy -->
          <association label="Problem Code" enableexpression="@failurecode!=null" target="problemcode" labelfield="offlineproblemlist_.description" requiredexpression="@worktype_.type == 'CM' &amp;&amp; @status==='COMP'" extraprojectionvalues="failurelist" >
            <event type="afterchange" service="fsWorkorderOfflineService" method="afterProblemChanged"/>
          </association>

          <association label="Cause" enableexpression="@problemcode!=null" target="fr1code" labelfield="offlinecauselist_.description" requiredexpression="@worktype_.type == 'CM' &amp;&amp; @status==='COMP'"
                       extraprojectionvalues="failurelist">
            <event type="afterchange" service="fsWorkorderOfflineService" method="afterCauseChanged"/>
          </association>

          <association label="Remedy" enableexpression="@fr1code!=null" target="fr2code" labelfield="offlineremedylist_.description" requiredexpression="@worktype_.type == 'CM' &amp;&amp; @status==='COMP'"
                       extraprojectionvalues="failurelist">
            <event type="afterchange" service="fsWorkorderOfflineService" method="afterRemedyChanged"/>
          </association>

          <!-- EndRegion-->

          <!-- Region Compositions: materials, labors, attachmets -->
          <composition relationship="matusetrans" label="Materials" >
            <collectionproperties allowupdate="false" allowcreation="@status!=='CLOSE'"/>
          </composition>
          <composition relationship="labtrans" label="Labor">
            <collectionproperties allowupdate="false" allowcreation="@status!=='CLOSE'" />
          </composition>
          <composition relationship="attachment" label="Attachments">
            <collectionproperties prefilterfunction="ZeroAttachmentsWhereClause"/>
          </composition>
          <!-- EndRegion -->

          <commandbars>
            <commandgroup platform="mobile" position="mobile.fab" removeundeclared="false">
              <container id="detail.container" icon="fa-bolt">
                <!-- TODO: currently no support for merging command containers so repeating base commands -->
                <command id="quicksync"
                         service="itemActionService" method="quickSyncCurrentItem"
                         showexpression="service:itemActionService.shouldAllowQuickSyncForCurrentItem"
                         icon="ion-loop" label="Quick Sync"/>
                <command id="restoreitem"
                         service="itemActionService" method="deleteOrRestoreCurrentItem"
                         showexpression="service:itemActionService.shouldAllowDeleteOrRestoreForCurrentItem"
                         icon="ion-trash-a" label="Delete/Restore" cssclasses="red" />

                <command id="startlabtrans" service="laborService" method="startLaborTransaction"
                         showexpression="service:laborService.shouldAllowLaborStart"
                         icon="ion-play" label="Start Labor Report" cssclasses="green"/>
                <command id="finishlabtrans" service="laborService" method="finishLaborTransaction"
                         showexpression="service:laborService.shouldAllowLaborFinish"
                         icon="ion-stop" label="Finish Labor Report" cssclasses="red" />
              </container>
            </commandgroup>
          </commandbars>

          <event type="onload" service="fsWorkorderOfflineService" method="onDetailLoad"/>
        </detail>
      </schemas>
    </application>


    <application name="numericdomain" title="Numeric Domain" entity="numericdomain">
      <schemas>
        <list platform="mobile" title="Numeric Domain">
          <field attribute="description" label="Description"/>
          <field attribute="value" label="Value"/>
          <field attribute="domainid" label="Domain"/>
        </list>
      </schemas>
    </application>

    <application name="locancestor" title="Location Ancestry" entity="locancestor">
      <properties>
        <property key="list.offline.text.indexlist" value="location,ancestor"/>
        <property key="mobile.fetchlimit" value="1000"/>
      </properties>

      <schemas>
        <list platform="mobile" title="Numeric Domain">
          <field attribute="location" label="Location"/>
          <field attribute="ancestor" label="Ancestor"/>
          <field attribute="locancestorid" label="Id"/>
        </list>
      </schemas>
    </application>


    <application name="location" title="Location" entity="location" >

      <filters>
        <optionfilter attribute="location" provider="@firstSolarPCSLocationHandler.HandlePCSLocationProvider" displaycode="false"
              allowblank="true" whereclause="@firstSolarPCSLocationHandler.HandlePCSLocation"/>
      </filters>

      <schemas>
        <schema id="locationfilter" stereotype="list.selection.modal.filter">
          <field attribute="location" label="Location"/>
          <field attribute="description" label="Description"/>
          <field attribute="classstructure_.description" label="Class Structure"/>
          <!--field attribute="parentlocation_.parent" label="Parent Location"/-->
          <field attribute="siteid" label="Site"/>
        </schema>
        <schema id="list"  redeclaring="false" stereotype="list.selection">
          <commandbars>
            <commandgroup position="actions">
              <!--              <container label="Actions" id="actioncontainer" icon="fa-bolt">-->
              <command id="Create" icon="fa-wrench" label="Create W.O."
                       service="locationService" method="initBatchWorkorder"
                       parameters="schema,datamap" cssclasses="large-button"/>
              <!--              </container>-->
            </commandgroup>
          </commandbars>

          <properties>
            <property key="search.schemaid" value="search"/>
          </properties>
        </schema>

        <schema id="locationdetail"  redeclaring="false" stereotype="detail">
          <properties>
            <property key="search.schemaid" value="search"/>
          </properties>
        </schema>

        <schema id="search" title="Location Search" stereotype="search">
          <field attribute="fslocationsearch" hidden="true" default="true" searchoperation="eq"/>
          <field attribute="fsincludesubloc" label="Include Sublocations?" defaultexpression="false" searchoperation="eq">
            <renderer type="checkbox" params="layout=left"/>
          </field>
          <optionfield attribute="fsfacility" label="Facility" requiredexpression="true" searchoperation="eq" default="">
            <option label="ACS1"  value="ACS01"/>
            <option label="AES1"  value="AES11"/>
            <option label="AMH1"  value="AMH11"/>
            <option label="AMH2"  value="AMR03,AMR04"/>
            <option label="ALM1"  value="ALM01"/>
            <option label="ALP1"  value="ALP11"/>
            <option label="AVS1"  value="AVS11"/>
            <option label="AVV1"  value="AVV11"/>
            <option label="BEL1"  value="BEL11"/>
            <option label="BRS1"  value="BRS11"/>
            <option label="BWS1"  value="BWS11"/>
            <option label="CBLA"  value="CBLA1"/>
            <option label="CCS1"  value="CCS11"/>
            <option label="CGL1"  value="CGL11"/>
            <option label="CID1"  value="CID11"/>
            <option label="CIM1"  value="CIM01"/>
            <option label="CVS1"  value="CVS11"/>
            <option label="DSS1"  value="DSS11,DSS21"/>
            <option label="GAL1"  value="GAL01"/>
            <option label="HON1"  value="HON01"/>
            <option label="IVS1"  value="IVS11"/>
            <option label="IVW1"  value="IVW11"/>
            <option label="KBSA"  value="KBSA1"/>
            <option label="KBSB"  value="KBSB1"/>
            <option label="KNS1"  value="KNS11"/>
            <option label="KSS1"  value="KSS11"/>
            <option label="LHS1"  value="LHS11"/>
            <option label="LMS1"  value="LMS01"/>
            <option label="MAN1"  value="MAN11"/>
            <option label="MLK1"  value="MLK11"/>
            <option label="MSS1"  value="MSS11"/>
            <option label="NSS1"  value="NSS11"/>
            <option label="ORS1"  value="ORS11"/>
            <option label="OTE1"  value="OTE11"/>
            <option label="REE1"  value="REE01"/>
            <option label="SAR1"  value="SAR01,SAR02,SAR03,SAR04,SAR05,SAR06,SAR07,SAR08"/>
            <option label="SDVL"  value="SDVL1"/>
            <option label="SES1"  value="SES10"/>
            <option label="SES2"  value="SES20"/>
            <option label="SGAH"  value="SGAH1"/>
            <option label="SGAK"  value="SGAK1"/>
            <option label="SGSO"  value="SGSO1"/>
            <option label="SLS1"  value="SLS11"/>
            <option label="SSN1"  value="SSN01"/>
            <option label="STT1"  value="STT01"/>
            <option label="TIL1"  value="TIL02"/>
            <option label="TPZ1"  value="TPZ11"/>
            <event type="afterchange" service="advancedSearchService" method="facilitySelected"/>
          </optionfield>
          <optionfield attribute="fslocint" label="Locations of Interest" providerattribute="_FsLocationsOfInterest" searchoperation="eq">
            <renderer type="combo" params="multiple=true"/>
          </optionfield>
          <optionfield attribute="fsswitchgear" label="Switchgear Locations" providerattribute="_FsSwitchgearLocations" searchoperation="eq">
            <renderer type="combo" params="multiple=true"/>
          </optionfield>
          <optionfield attribute="fspcslocations" providerattribute="_FsPcsLocations" searchoperation="eq">
            <renderer type="combodropdown" params="multiple=true;showvaluesbelow=true;buttontext=Select PCS(s);maxheight=300;labelmaxlength=30;customdropdownfunction=advancedSearchService.customizeComboDropdown"/>
          </optionfield>

          <commandbars>
            <commandgroup position="detailform" platform="web">
              <removecommand id="save"/>
              <removecommand id="print"/>
              <removecommand id="cancel"/>
              <command id="search" primary="true" icon="fa-search" service="dispatcherService" method="dispatchevent" label="Search" parameters="sw.crud.search,schema,datamap"/>
              <command id="clear" icon="fa-eraser" service="dispatcherService" method="dispatchevent" label="Clear" parameters="sw.crud.search.clear,schema,datamap"/>
              <command id="new" cssclasses="searchbutton" icon="fa-plus" service="advancedSearchService" method="newWorkOrder" label="New WO" parameters="schema,datamap"/>
            </commandgroup>
          </commandbars>

          <properties>
            <property key="search.panelwidth" value="180"/>
            <property key="crud.disableautofocus" value="true"/>
          </properties>
        </schema>
      </schemas>

      <properties>
        <property key="list.offline.text.indexlist" value="location"/>
      </properties>
    </application>

    <application name="person" title="Person" entity="person">

      <components>
        <componentdisplayable id="facilities">
          <optionfield attribute="facilities" label="Preferred Facilities" searchoperation="eq" default="" providerattribute="availableFacilities" showexpression="@personid != null">
            <renderer type="multiselectautocompleteclient" params="creationallowed=false"/>
          </optionfield>
        </componentdisplayable>
      </components>

      <schemas>
        <schema id="detail" redeclaring="false">
          <customization position="location">
            <reference id="facilities"/>
          </customization>
        </schema>

        <schema id="myprofiledetail" redeclaring="false">
          <customization position="location">
            <reference id="facilities"/>
          </customization>
        </schema>
      </schemas>
    </application>

    <application name="asset" title="Asset" entity="asset" >
      <properties>
        <property key="list.offline.text.indexlist" value="location"/>
      </properties>

      <filters>
        <optionfilter attribute="location" provider="@firstSolarPCSLocationHandler.HandlePCSLocationProvider" displaycode="false"
              allowblank="true" whereclause="@firstSolarPCSLocationHandler.HandlePCSLocation"/>
      </filters>

      <schemas>


        <schema id="list"  redeclaring="false" stereotype="list.selection" platform="web">
          <commandbars>
            <commandgroup position="actions">
              <!--              <container label="Actions" id="actioncontainer" icon="fa-bolt">-->
              <command id="Create" icon="fa-wrench" label="Create W.O."
                       service="assetService" method="initBatchWorkorder"
                       parameters="schema,datamap" cssclasses="large-button"/>
              <!--              </container>-->
            </commandgroup>
          </commandbars>

          <properties>
            <property key="search.schemaid" value="search"/>
            <property key="list.selectionstyle" value="multiple"/>
          </properties>
        </schema>

        <schema id="detail"  redeclaring="false" stereotype="detail">
          <properties>
            <property key="search.schemaid" value="search"/>
          </properties>
        </schema>



        <schema id="search" title="Location Search" stereotype="search">
          <field attribute="fslocationsearch" hidden="true" default="true" searchoperation="eq"/>
          <field attribute="fsincludesubloc" label="Include Sublocations?" defaultexpression="false" searchoperation="eq">
            <renderer type="checkbox" params="layout=left"/>
          </field>
          <optionfield attribute="fsfacility" label="Facility" requiredexpression="true" searchoperation="eq" default="">
            <option label="ACS1"  value="ACS01"/>
            <option label="AES1"  value="AES11"/>
            <option label="AMH1"  value="AMH11"/>
            <option label="AMH2"  value="AMR03,AMR04"/>
            <option label="ALM1"  value="ALM01"/>
            <option label="ALP1"  value="ALP11"/>
            <option label="AVS1"  value="AVS11"/>
            <option label="AVV1"  value="AVV11"/>
            <option label="BEL1"  value="BEL11"/>
            <option label="BRS1"  value="BRS11"/>
            <option label="BWS1"  value="BWS11"/>
            <option label="CBLA"  value="CBLA1"/>
            <option label="CCS1"  value="CCS11"/>
            <option label="CGL1"  value="CGL11"/>
            <option label="CID1"  value="CID11"/>
            <option label="CIM1"  value="CIM01"/>
            <option label="CVS1"  value="CVS11"/>
            <option label="DSS1"  value="DSS11,DSS21"/>
            <option label="GAL1"  value="GAL01"/>
            <option label="HON1"  value="HON01"/>
            <option label="IVS1"  value="IVS11"/>
            <option label="IVW1"  value="IVW11"/>
            <option label="KBSA"  value="KBSA1"/>
            <option label="KBSB"  value="KBSB1"/>
            <option label="KNS1"  value="KNS11"/>
            <option label="KSS1"  value="KSS11"/>
            <option label="LHS1"  value="LHS11"/>
            <option label="LMS1"  value="LMS01"/>
            <option label="MAN1"  value="MAN11"/>
            <option label="MLK1"  value="MLK11"/>
            <option label="MSS1"  value="MSS11"/>
            <option label="NSS1"  value="NSS11"/>
            <option label="ORS1"  value="ORS11"/>
            <option label="OTE1"  value="OTE11"/>
            <option label="REE1"  value="REE01"/>
            <option label="SAR1"  value="SAR01,SAR02,SAR03,SAR04,SAR05,SAR06,SAR07,SAR08"/>
            <option label="SDVL"  value="SDVL1"/>
            <option label="SES1"  value="SES10"/>
            <option label="SES2"  value="SES20"/>
            <option label="SGAH"  value="SGAH1"/>
            <option label="SGAK"  value="SGAK1"/>
            <option label="SGSO"  value="SGSO1"/>
            <option label="SLS1"  value="SLS11"/>
            <option label="SSN1"  value="SSN01"/>
            <option label="STT1"  value="STT01"/>
            <option label="TIL1"  value="TIL02"/>
            <option label="TPZ1"  value="TPZ11"/>
            <event type="afterchange" service="advancedSearchService" method="facilitySelected"/>
          </optionfield>
          <optionfield attribute="fslocint" label="Locations of Interest" providerattribute="_FsLocationsOfInterest" searchoperation="eq">
            <renderer type="combo" params="multiple=true"/>
          </optionfield>
          <optionfield attribute="fsswitchgear" label="Switchgear Locations" providerattribute="_FsSwitchgearLocations" searchoperation="eq">
            <renderer type="combo" params="multiple=true"/>
          </optionfield>
          <optionfield attribute="fspcslocations" providerattribute="_FsPcsLocations" searchoperation="eq">
            <renderer type="combodropdown" params="multiple=true;showvaluesbelow=true;buttontext=Select PCS(s);maxheight=300;labelmaxlength=30;customdropdownfunction=advancedSearchService.customizeComboDropdown"/>
          </optionfield>

          <commandbars>
            <commandgroup position="detailform" platform="web">
              <removecommand id="save"/>
              <removecommand id="print"/>
              <removecommand id="cancel"/>
              <command id="search" primary="true" icon="fa-search" service="dispatcherService" method="dispatchevent" label="Search" parameters="sw.crud.search,schema,datamap"/>
              <command id="clear" icon="fa-eraser" service="dispatcherService" method="dispatchevent" label="Clear" parameters="sw.crud.search.clear,schema,datamap"/>
              <command id="new" cssclasses="searchbutton" icon="fa-plus" service="advancedSearchService" method="newWorkOrder" label="New WO" parameters="schema,datamap"/>
            </commandgroup>
          </commandbars>

          <properties>
            <property key="search.panelwidth" value="180"/>
            <property key="crud.disableautofocus" value="true"/>
          </properties>
        </schema>
      </schemas>
    </application>

    <application name="matusetrans" entity="matusetrans" title="Material">
      <schemas>
        <!-- #region: mobile -->
        <list stereotype="compositionlist" platform="mobile">
          <field attribute="itemnum" label="Item#" />
          <field attribute="description" label="Description" />
          <field attribute="linetype" label="Type" />
          <field attribute="storeloc" label="Storeroom" />
          <field attribute="qtyrequested" label="Quantity" />
          <field attribute="unitcost" showexpression="@linetype==='MATERIAL'" label="Unit Cost">
            <renderer type="default" params="formatter=money"/>
          </field>
          <field attribute="transdate" label="Created Date" >
            <renderer type="datetime" params="format=MM/dd/yyyy HH:mm;showtime=true"/>
          </field>
        </list>

        <detail stereotype="compositiondetail" platform="mobile">
          <!-- declared just so it can be fetched in sync -->
          <association target="#inventory" labelfield="offlineinventory.itemnum"
                       showexpression="false" enableexpression="false"
                       label="#inventory" />

          <field attribute="matusetransid" hidden="true" />
          <field attribute="refwo" hidden="true" />
          <field attribute="orgid" defaultexpression="$.parentdata.fields.orgid" hidden="true" />
          <field attribute="siteid" defaultexpression="$.parentdata.fields.siteid" hidden="true" />

          <field attribute="transdate" hidden="true" defaultexpression="@now" >
            <renderer type="datetime" params="format=MM/dd/yyyy HH:mm;showtime=true"/>
          </field>

          <optionfield attribute="linetype" label="Type" default="ITEM">
            <event type="afterchange" service="materialService" method="lineSelected"/>
            <option label="ITEM" value="ITEM"/>
            <option label="MATERIAL" value="MATERIAL"/>
          </optionfield>

          <association target="storeloc" labelfield="offlinelocation_.location"
                       showexpression="@linetype==='ITEM'" requiredexpression="@linetype==='ITEM'"
                       label="Storeroom">
            <dataprovider whereClause="@materialService.getStoreRoomWhereClause"/>
            <event type="afterchange" service="materialService" method="storeRoomSelected"/>
          </association>

          <association target="itemnum" labelfield="offlineitem_.description" extraprojectionvalues="description"
                       showexpression="@linetype==='ITEM'" requiredexpression="@linetype==='ITEM'"
                       label="Item" >
            <dataprovider whereClause="@materialService.getAvailableItemsWhereClause"/>
            <event type="afterchange" service="materialService" method="itemSelected"/>
          </association>

          <association target="warranty" labelfield="warranty_.description" requiredexpression="true" label="Warranty">
            <renderer type="lookup" params="showCode=false"/>
          </association>

          <field attribute="description" label="Material Description" requiredexpression="true" showexpression="@linetype==='MATERIAL'"/>
          <field attribute="unitcost" label="Unit Cost" qualifier="quantity" requiredexpression="@linetype==='MATERIAL'" showexpression="@linetype==='MATERIAL'">
            <renderer type="numericinput" params="min=0;step=0.01" />
          </field>

          <field attribute="qtyrequested" label="Quantity" requiredexpression="true" qualifier="quantity" default="1">
            <renderer type="numericinput" params="min=1;max=100;decimals=0;step=1"/>
          </field>

        </detail>
        <!-- #endregion -->
      </schemas>
    </application>

    <application name="worklog" title="Work Logs" entity="worklog">
      <schemas>
        <schema id="workpackagelist"  stereotype="compositionlist" platform="web">
          <field attribute="worklogid" hidden="true" />
          <field attribute="modifydate" hidden="true"/>
          <field attribute="description" hidden="true"/>
          <field attribute="wld_.ldtext" hidden="true"/>
          <field attribute="createby" label="Engineer" />
          <field attribute="createdate" label="Date">
            <renderer type="datetime" params="format=MM/dd/yyyy HH:mm:ss"/>
          </field>
        </schema>

        <schema id="workpackageview"  stereotype="compositiondetail" platform="web">
          <field attribute="modifydate" label="Last Changed Date">
            <renderer type="datetime" params="format=MM/dd/yyyy HH:mm:ss"/>
          </field>
          <field attribute="wld_.ldtext" label="Evaluation">
            <renderer type="richtext"/>
          </field>
        </schema>

        <schema id="workpackageadetail"  stereotype="detail" abstract="true" platform="web">
          <field attribute="worklogid" hidden="true" />
          <field attribute="modifydate" hidden="true"/>
          <field attribute="createby" hidden="true"/>
          <field attribute="createdate" hidden="true"/>
          <field attribute="wld_.ldtext" label="Evaluation" requiredexpression="true">
            <renderer type="richtext"/>
          </field>
        </schema>

        <schema id="workpackagenewdetail" parentschema="workpackageadetail" title="New Engineering Evaluation"  platform="web" stereotype="detailnew">
        </schema>

        <schema id="workpackagedetail" parentschema="workpackageadetail" title="Engineering Evaluation"  platform="web" stereotype="detail">
        </schema>
      </schemas>
    </application>

    <application name="attachment" title="Attachment" entity="DOCLINKS">
      <schemas>
        <schema id="workpackagelist" stereotype="compositionlist" platform="web">
          <field hidden="true" attribute="ownerid"/>
          <field attribute="docinfoid" hidden="true" />
          <field attribute="doclinksid" hidden="true" />
          <field attribute="docinfo_.urlname" hidden="true"/>
          <field attribute="docinfo_.urltype" hidden="true"/>
          <field attribute="docinfo_.urlparam1" hidden="true"/>
          <field attribute="docinfo_.description" hidden="true"/>
          <field attribute="document" hidden="true"/>
          <field attribute="doctype" hidden="true"/>
          <field attribute="createdate" label="Created Date"/>
          <field attribute="createby" label="Created By"/>
        </schema>
      </schemas>
    </application>

    <!-- #region: Mobile offline association data -->

    <application name="offlineitem" entity="offlineitem" title="Item">
      <schemas>
        <list platform="mobile">
          <field attribute="itemnum" label="Item" />
          <field attribute="description" label="Description"/>
          <field attribute="status" label="Status"/>
          <field attribute="itemtype" label="Type"/>
          <field attribute="rotating" label="Rotating"/>
          <field attribute="commoditygroup" label="Commodity Group"/>
        </list>
      </schemas>
      <properties>
        <property key="list.offline.text.indexlist" value="itemnum"/>
      </properties>
    </application>

    <application name="offlineinventory" entity="inventory" title="Inventory">
      <schemas>
        <list platform="mobile">
          <field attribute="location" label="Location" />
          <field attribute="itemnum" label="Item" />
        </list>
      </schemas>
      <properties>
        <property key="list.offline.text.indexlist" value="itemnum,location"/>
      </properties>
    </application>

    <application name="classstructure" title="Class Structure" entity="classstructure">
      <schemas>
        <list platform="mobile">
          <field attribute="classstructureid" hidden="true"/>
          <field attribute="description" label="Description"/>
        </list>
      </schemas>
      <properties>
        <property key="list.offline.text.indexlist" value="classstructureid"/>
      </properties>
    </application>

    <application name="failurelistonly" title="Failure List" entity="failurelistonly">
      <schemas>
        <list platform="mobile">
          <field attribute="failurecode" hidden="true"/>
          <field attribute="failurelist" hidden="true"/>
          <field attribute="orgid" hidden="true"/>
          <field attribute="status" hidden="true"/>
          <field attribute="parent" hidden="true"/>
          <field attribute="description" label="Description"/>
        </list>
      </schemas>
      <properties>
        <property key="list.offline.text.indexlist" value="failurecode"/>
      </properties>
    </application>

    <application name="problemlist" title="Problem List" entity="problemlist">
      <schemas>
        <list platform="mobile">
          <field attribute="failurecode" hidden="true"/>
          <field attribute="failurelist" hidden="true"/>
          <field attribute="parent" hidden="true"/>
          <field attribute="orgid" hidden="true"/>
          <field attribute="status" hidden="true"/>
          <field attribute="description" label="Description"/>
        </list>
      </schemas>
      <properties>
        <property key="list.offline.text.indexlist" value="failurecode"/>
      </properties>
    </application>

    <application name="labor" title="Labor" entity="labor" >
      <schemas></schemas>
      <properties>
        <property key="mobile.userInteractionEnabled" value="false"/>
        <property key="mobile.fetchlimit" value="300"/>
        <property key="offline.sync.avoidcaching" value="true"/>
      </properties>
    </application>

    <application name="causelist" title="Cause List" entity="causelist">
      <schemas>
        <list platform="mobile">
          <field attribute="failurecode" hidden="true"/>
          <field attribute="failurelist" hidden="true"/>
          <field attribute="orgid" hidden="true"/>
          <field attribute="status" hidden="true"/>
          <field attribute="parent" hidden="true"/>
          <field attribute="description" label="Description"/>
          
        </list>
      </schemas>
      <properties>
        <property key="list.offline.text.indexlist" value="failurecode"/>
      </properties>
    </application>

    <application name="remedylist" title="Remedy List" entity="remedylist">
      <schemas>
        <list platform="mobile">
          <field attribute="failurecode" hidden="true"/>
          <field attribute="failurelist" hidden="true"/>
          <field attribute="parent" hidden="true"/>
          <field attribute="orgid" hidden="true"/>
          <field attribute="status" hidden="true"/>
          <field attribute="description" label="Description"/>
        </list>
      </schemas>
      <properties>
        <property key="list.offline.text.indexlist" value="failurecode"/>
      </properties>
    </application>

    <application name="offlinelocation" entity="location" title="Location">
      <schemas>
        <list platform="mobile">
          <field attribute="location" label="Location" />
          <field attribute="description" label="Description"/>
          <field attribute="type" label="Type" />
          <field attribute="status" label="Status" />
          <field attribute="parent" hidden="true" />
          <field attribute="hierarchy" hidden="true" />
        </list>
      </schemas>

      <properties>
        <property key="list.offline.text.indexlist" value="location,type,status,hierarchy"/>
      </properties>
    </application>

    <application name="offlineasset" entity="asset" title="Asset">
      <schemas>
        <list platform="mobile">
          <field attribute="assetnum" label="Asset"/>
          <field attribute="location" label="Location"/>
          <field attribute="failurecode" hidden="true"/>
          <field attribute="description" label="Description"/>
        </list>
      </schemas>

      <properties>
        <property key="list.offline.text.indexlist" value="location,assetnum"/>
      </properties>
    </application>

    <application name="warranty" entity="warranty" title="Warranty">
      <schemas>
        <list platform="mobile">
          <field attribute="domainid"/>
          <field attribute="value"/>
          <field attribute="description"/>
        </list>
      </schemas>
    </application>

    <!-- #endregion-->

  </applications>
</metadata>
