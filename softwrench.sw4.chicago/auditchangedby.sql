CREATE TRIGGER audit_change_by_on_audit ON a_ticket INSTEAD OF INSERT AS 
BEGIN 
DECLARE @ticketuid bigint, @changeby varchar(100)
SELECT @ticketuid = ticketuid FROM inserted
SELECT @changeby = changeby FROM sr WITH (NOLOCK) WHERE ticketuid = @ticketuid 
INSERT INTO a_ticket (changeby,eauditusername,accumulatedholdtime,actlabcost,actlabhrs,actualcontactdate,actualfinish,actualstart,adjustedtargetcontacttime,adjustedtargetresolutiontime,adjustedtargetresponsetime,affecteddate,affectedemail,affectedperson,affectedphone,assetnum,assetorgid,assetsiteid,assignedownergroup,calccalendar,calcorgid,calcshift,changedate,cinum,class,classificationid,classstructureid,commodity,commoditygroup,correlationattrs,createdby,createwomulti,creationdate,description,descsrvid,externalrecid,externalsystem,externalsystem_ticketid,failurecode,fr1code,fr2code,glaccount,globalticketclass,globalticketid,hasactivity,hasld,hassolution,historyflag,impact,indicatedpriority,inheritstatus,internalpriority,isglobal,isknownerror,isknownerrordate,itdaltphone,itdchargable,itdchcreatedbygroup,itdclosurecode,itdexternalkmreference,itdflowcontrolled,itdkmranking,itdresolvergroup,langcode,location,orgid,origrecordclass,origrecordid,origrecorgid,origrecsiteid,outageduration,owner,ownergroup,pluspagreement,pluspbblinenum,pluspbillbatch,pluspcalccalnum,pluspcalcorgid,pluspcalcshift,pluspcostcenter,pluspcustchacct,pluspcustomer,pluspcustponum,pluspmaxprice,pluspporeq,plusppricesched,pluspquotedprice,pluspquotetype,pluspresponseplan,plusprevnum,pmcomimpact,pmcomresolution,pmcomtype,pmcomurgency,pmsccrid,pmscinvalid,pmscitemnum,pmscitemsetid,pmscoffsummary,pmscquantity,pmsctmplid,problemcode,relatedtoglobal,reportdate,reportedby,reportedemail,reportedphone,reportedpriority,selfservsolaccess,siteid,sitevisit,solution,source,status,statusdate,supervisor,targetcontactdate,targetdesc,targetfinish,targetstart,tdfirstcallresolution,template,templateid,ticketid,ticketuid,urgency,vendor,virtualenv,eaudittimestamp,eaudittype,eaudittransid,esigtransid,itdclosedate,itdslaholddate,itdfirstcallresolution,tickettype,ismticketid,ismticketuid,department,itdbridgeticketnum) 
SELECT @changeby as changeby, @changeby as eauditusername, accumulatedholdtime,actlabcost,actlabhrs,actualcontactdate,actualfinish,actualstart,adjustedtargetcontacttime,adjustedtargetresolutiontime,adjustedtargetresponsetime,affecteddate,affectedemail,affectedperson,affectedphone,assetnum,assetorgid,assetsiteid,assignedownergroup,calccalendar,calcorgid,calcshift,changedate,cinum,class,classificationid,classstructureid,commodity,commoditygroup,correlationattrs,createdby,createwomulti,creationdate,description,descsrvid,externalrecid,externalsystem,externalsystem_ticketid,failurecode,fr1code,fr2code,glaccount,globalticketclass,globalticketid,hasactivity,hasld,hassolution,historyflag,impact,indicatedpriority,inheritstatus,internalpriority,isglobal,isknownerror,isknownerrordate,itdaltphone,itdchargable,itdchcreatedbygroup,itdclosurecode,itdexternalkmreference,itdflowcontrolled,itdkmranking,itdresolvergroup,langcode,location,orgid,origrecordclass,origrecordid,origrecorgid,origrecsiteid,outageduration,owner,ownergroup,pluspagreement,pluspbblinenum,pluspbillbatch,pluspcalccalnum,pluspcalcorgid,pluspcalcshift,pluspcostcenter,pluspcustchacct,pluspcustomer,pluspcustponum,pluspmaxprice,pluspporeq,plusppricesched,pluspquotedprice,pluspquotetype,pluspresponseplan,plusprevnum,pmcomimpact,pmcomresolution,pmcomtype,pmcomurgency,pmsccrid,pmscinvalid,pmscitemnum,pmscitemsetid,pmscoffsummary,pmscquantity,pmsctmplid,problemcode,relatedtoglobal,reportdate,reportedby,reportedemail,reportedphone,reportedpriority,selfservsolaccess,siteid,sitevisit,solution,source,status,statusdate,supervisor,targetcontactdate,targetdesc,targetfinish,targetstart,tdfirstcallresolution,template,templateid,ticketid,ticketuid,urgency,vendor,virtualenv,eaudittimestamp,eaudittype,eaudittransid,esigtransid,itdclosedate,itdslaholddate,itdfirstcallresolution,tickettype,ismticketid,ismticketuid,department,itdbridgeticketnum FROM inserted
END;