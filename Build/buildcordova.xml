<project name="Softwrench" default="build" basedir="." xmlns="http://nant.sf.net/release/0.92/nant.xsd" >

  <description>Softwrench</description>
  <property name="debug" value="true" overwrite="false" />


  <property name="MSBuildPath" value="c:\Windows\Microsoft.NET\Framework64\v4.0.30319\MSBuild.exe" />
  <property name="MSDeployPath" value="C:\Program Files (x86)\IIS\Microsoft Web Deploy V3\msdeploy.exe" />
  <property name="CordovaTargets" value="C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v12.0\CordovaTools\vs-mda-targets\" />
  <!--   <property name="MSTestPath" value="c:\Windows\Microsoft.NET\Framework64\v4.0.30319\MSTest.exe" />-->
  <property name="SolutionFile" value="../softwrench.sW4.WebMobile/softwrench.sW4.WebMobile.jsproj" />
  <property name="TestSettingsPath" value="../TestSettings1.testsettings" />
  <property name="TestPath" value="../softwrench.sW4.test/bin/Debug/softwrench.sW4.test.dll" />
  <!---last back slash needs to be doubled-->
  <property name="NodeJsDir" value="&quot;C:\Program Files\nodejs\\&quot;" />
  <property name="MDAVsixDir" value="&quot;C:\PROGRAM FILES (X86)\MICROSOFT VISUAL STUDIO 12.0\COMMON7\IDE\EXTENSIONS\XP35WOV2.FCB\\&quot;" />
  <property name="NpmInstallDir" value="C:\Users\rolim\AppData\Roaming\npm" />
  <property name="LangName" value="&quot;en-US&quot;" />
  <property name="ProjectDir" value="." />
  <property name="MdaVsCliProjectDir" value="." />
  
  <if test="${environment::variable-exists('outputdir')}">
    <property name="OutputDir" value="${environment::get-variable('outputdir')}" />
  </if>

  <ifnot test="${environment::variable-exists('outputdir')}">
    <property name="OutputDir" value="c:\" />
  </ifnot>

  <tstamp property="build.date" pattern="yyyy_MM_dd_hh_mm_ss" verbose="true" />

  <property name="deploypath" value="${OutputDir}/deploy/${build.date}"/>



  <if test="${property::exists('ignoretstamp')==true}">
    <!--makes development easier-->
    <property name="deploypath" value="${OutputDir}/deploy/local"></property>
    <delete dir="${OutputDir}/deploy/local" failonerror="false"/>
  </if>

  <!--These will come from jenkins-->
  <if test="${environment::variable-exists('clientsw4')}">
    <property name="client" value="${environment::get-variable('clientsw4')}" />
  </if>
  
  <if test="${environment::variable-exists('platform')}">
    <property name="profile" value="${environment::get-variable('platform')}" />
  </if>
  
 


  <target name="generatedeployfolderripple">
    <exec program="${MSBuildPath}" verbose="true">
      <arg line='"${SolutionFile}"' />
	  <arg value="/target:Build" />
	  <arg value="/property:LangName=en-US" />
      <arg value="/v:Detailed" />
      <arg value="/property:platform=Android" />
	  <arg value="/property:DebuggerFlavor=RippleNexus" />
	  <arg value="/property:ProjectDir=F:\Github\softwrench\softwrench.sW4.WebMobile" />
	  <arg value="/property:MdaVsCliProjectDir=F:\Github\softwrench\softwrench.sW4.WebMobile" />
	  <arg value="/property:NpmInstallDir=${NpmInstallDir}" />
      <arg line="/property:Configuration=Debug;MDAVsixDir=${MDAVsixDir};NodeJsDir=${NodeJsDir}" />
    </exec>
  </target>
  
   <target name="generatedeployfolderandroid">
    <exec program="${MSBuildPath}" verbose="true">
      <arg line='"${SolutionFile}"' />
	  <arg value="/target:BuildMDA" />
	  <arg value="/property:LangName=en-US" />
      <arg value="/v:Detailed" />
      <arg value="/property:platform=Android" />
	  <arg value="/property:DebuggerFlavor=Device" />
	  <arg value="/property:ProjectDir=F:\Github\softwrench\softwrench.sW4.WebMobile" />
	  <arg value="/property:MdaVsCliProjectDir=F:\Github\softwrench\softwrench.sW4.WebMobile" />
	  <arg value="/property:NpmInstallDir=${NpmInstallDir}" />
      <arg line="/property:Configuration=Debug;MDAVsixDir=${MDAVsixDir};NodeJsDir=${NodeJsDir}" />
    </exec>
  </target>

  


</project>