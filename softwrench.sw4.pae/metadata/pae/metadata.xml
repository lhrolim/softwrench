<?xml version="1.0" encoding="utf-8" ?>
<metadata xmlns="http://www.controltechnologysolutions.com/metadata">
  <templates>
    <!--WorkOrder-->
    <template path="@workorder.xml"/>
    <!--<template path="workorderbatch.xml"/>-->

    <!--ServiceRequest-->
    <template path="@servicerequest.xml"/>

    <template path="@quickservicerequest.xml"/>

    <!--Incident-->
    <template path="@incident.xml"/>

    <!--Inventory-->
    <template path="@inventory.xml"/>

    <!--Changes-->
    <template path="@wochange.xml"/>

    <!--Purchasing-->
    <template path="@receiving.xml"/>
    <template path="@purchasing.xml"/>

    <!--Solution-->
    <template path="@solution.xml"/>

    <!--Person-->
    <template path="@person.xml"/>



  </templates>

  <entities>
    <entity name="paeasset" parententity="asset" idAttribute="assetid" useridAttribute="assetnum" whereclause="recordtype = 'PROP' and propcondition = 1">
      <attributes>
        <attribute name="assetid" type="bigint" required="true"/>
        <attribute name="locinfo" type="varchar" required="false" />
        <attribute name="plustmodel" type="varchar" required="false" />
        <attribute name="prophr" type="varchar" required="false" />
        <attribute name="partnum" type="varchar" required="false" />
        <attribute name="proptype" type="varchar" required="false" />
        <attribute name="proplinenum" type="bigint" required="false" />
        <attribute name="propmanuf" type="varchar" required="false" />
        <attribute name="description" type="varchar" required="true"/>
        <attribute name="invdate" type="datetime" required="true"/>
        <attribute name="invpostdate" type="datetime" required="true"/>
        <attribute name="invpostdateby" type="varchar" required="true"/>
        <attribute name="invposttype" type="varchar" required="true"/>
      </attributes>
      <relationships>
        <relationship to="alndomain" qualifier="assettype">
          <relationshipAttribute from="proptype" to="value" primary="true"/>
          <relationshipAttribute from="siteid" to="siteid" allowsnull="true"/>
          <relationshipAttribute from="orgid" to="orgid" allowsnull="true"/>
          <relationshipAttribute to="domainid" literal="PROPTYPE" quoteLiteral="true"/>
        </relationship>
        <relationship to="alndomain" qualifier="assetstatus">
          <relationshipAttribute from="status" to="value" primary="true"/>
          <relationshipAttribute from="siteid" to="siteid" allowsnull="true"/>
          <relationshipAttribute from="orgid" to="orgid" allowsnull="true"/>
          <relationshipAttribute to="domainid" literal="RSSASSETSTATUS" quoteLiteral="true"/>
        </relationship>
      </relationships>
      <connectorParameters>
        <connectorParameter key="integration_interface" value="SWASSET" />
        <connectorParameter key="customconnector" value="softWrench.sW4.Data.Persistence.WS.Commons.PaeAssetCrudConnector"/>
      </connectorParameters>
    </entity>
  </entities>

  <applications>
    <application name="companies" entity="companies" title="Companies">
      <schemas>
        <schema id="companiesLookupList" stereotype="list">
          <field attribute="company" label="Company"/>
          <field attribute="name" label="Name">
            <renderer type="default" params="minwidth=300px" />
          </field>
          <field attribute="type" label="Type"/>
          <field attribute="orgid"  label="Organization"/>
        </schema>
      </schemas>
    </application>

    <application name="asset" title="Asset" entity="paeasset" audit="true">
      <properties>
        <property key="mobile.presyncservice" value="paeAssetService.preSync"/>
        <property key="mobile.fetchlimit" value="100000"/>
      </properties>
      
      <schemas>
        <list>
          <field attribute="assetid" hidden="true"/>
          <field attribute="assetnum" label="Asset" qualifier="title"/>
          <field attribute="location" label="Location" qualifier="subtitle"/>
          <field attribute="status" label="Status" qualifier="featured"/>
          <!--<field attribute="siteid" label="Site" qualifier="siteid" />-->
          <field attribute="propmanuf" label="Manufacturer"  qualifier="excerpt"/>
          <event type="onload" service="paeAssetService" method="initAssetGridListener"/>
          <properties>
            <property key="list.width.min" value="768px"/>
          </properties>
        </list>
        <detail>
          <field attribute="plustsoldamt" hidden="true"/>
          <field attribute="plusttotalmprevenue" hidden="true"/>
          <field attribute="taxpercent" hidden="true"/>

          <field attribute="priority" hidden="true"/>
          <field attribute="totdowntime" hidden="true"/>
          <field attribute="purchaseprice" hidden="true"/>
          <field attribute="replacecost" hidden="true"/>
          <field attribute="totalcost" hidden="true"/>
          <field attribute="ytdcost" hidden="true"/>
          <field attribute="budgetcost" hidden="true"/>
          <field attribute="unchargedcost" hidden="true"/>
          <field attribute="totunchargedcost" hidden="true"/>
          <field attribute="invcost" hidden="true"/>
          <field attribute="location_.locationsid" hidden="true"/>
          <field attribute="assetid" hidden="true" />

          <field attribute="assetnum" label="Barcode Number"  readonly="true" />
          
          <association label="Status:" target="status" labelfield="assetstatus.description">
            <renderer type="lookup" params="avoidautofocus=true"/>
          </association>
          
          
          <association target="proptype" label="Property Type" labelfield="assettype_.description">
            <renderer type="lookup" />
          </association>
          <field attribute="description" label="Description" readonly="true"  />
          <field attribute="locinfo" label="Location Info" />
          <field attribute="plustmodel" label="Model" requiredexpression="true"/>
          <field attribute="partnum" label="Part Number" requiredexpression="true"/>
          <field attribute="propmanuf" label="Manufacturer"/>
          <field attribute="serialnum" label="Serial Number" requiredexpression="true"/>
          <association target="location" label="Location" labelfield="location_.description">
            <renderer type="lookup" />
          </association>
          <field attribute="prophr" label="Hand Receipt#" hidden="true"/>
          <field attribute="siteid"  label="Site" hidden="true"/>
          <field attribute="orgid"  label="Site" hidden="true"/>
          <event type="beforesubmit.postvalidation" service="submitService" method="submitConfirmation"/>
          <event type="onload" service="paeAssetService" method="initAssetDetailListener"/>
        </detail>

        <schema id="assetLookupList" stereotype="list" platform="web">
          <field attribute="assetnum" label="Asset"/>
          <field attribute="description" label="Description">
            <renderer type="default" params="minwidth=300px" />
          </field>
          <field attribute="location" label="Location"/>
          <field attribute="siteid"  label="Site"/>
          <field attribute="status" label="Status"/>
        </schema>
        
      </schemas>
    </application>

    <application name="alndomain" entity="alndomain" title="AlnDomain">
      <schemas>
        <schema id="list">
          <field attribute="description" label="Description"></field>
          <field attribute="value" label="Value"></field>
          <field attribute="siteid" label="Siteid" hidden="true"></field>
          <field attribute="orgid" label="OrgId" hidden="true"></field>
          <field attribute="domainid" label="DomainId" hidden="true"></field>
        </schema>
      </schemas>
    </application>

  </applications>
</metadata>
