<div class="modal fade lookupModal modalLock" data-class="lookupModal" tabindex="-1" role="dialog" data-backdrop="static"
    data-keyboard="false" aria-labelledby="myModalLabel" aria-hidden="true" ng-class="lookupObj.fieldMetadata.target">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">

                <div>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">{{i18N('general.select','Select')}} {{lookupObj.fieldMetadata.label}}</h4>
                </div>
                <div class="context clearfix">
                    <pagination pagination-data="modalPaginationData"
                                disable-export="true"
                                disable-print="true"
                                renderfn="lookupModalSearch(pageNumber)" ng-cloak />
                </div>

            </div>
            <div class="modal-body">

                <table class="table table-hover hidden-phone" ng-show="lookupObj.schema == null">
                    <thead>
                        <tr class="header-row">
                            <th>
                                <span>{{lookupObj.fieldMetadata.label}}</span>
                            </th>
                            <th>
                                <span>{{getLookUpDescriptionLabel(lookupObj.fieldMetadata)}}</span>
                            </th>
                        </tr>
                        <tr class="filter-row">
                            <th>
                                <span class="input-group">
                                    <input type="search"
                                        placeholder="{{lookupObj.fieldMetadata.label}} Search"
                                        class="form-control" ng-model="lookupObj.code" ng-enter="lookupModalSearch()" />
                                    <span class="input-group-addon last"
                                        ng-click="lookupModalSearch()"
                                        rel="tooltip" data-original-title="{{i18N('search.click','Click to search')}}">
                                       <i class="glyphicon glyphicon-filter"></i>
                                    </span>
                                    <div></div><!--stop addon from moving on hover-->
                                </span>
                            </th>
                            <th>
                                <span class="input-group">
                                    <input type="search"
                                        placeholder="Description Search"
                                        class="form-control"
                                        ng-model="lookupObj.description"
                                        ng-enter="lookupModalSearch()" />
                                    <span class="input-group-addon last"
                                        ng-click="lookupModalSearch()"
                                        rel="tooltip" data-original-title="{{i18N('search.click','Click to search')}}">
                                        <i class="glyphicon glyphicon-filter"></i>
                                    </span>
                                    <div></div><!--stop addon from moving on hover-->
                                </span>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="option in lookupObj.options" ng-click="lookupModalSelect(option)">
                            <td>
                                <span>{{option.value}}</span>
                            </td>
                            <td>
                                <span>{{option.label}}</span>
                            </td>
                        </tr>
                    </tbody>
                </table>


                <table class="table table-hover hidden-phone" ng-show="lookupObj.schema != null">
                    <thead>
                        <tr class="header-row">
                            <th ng-repeat="column in lookupObj.schema.displayables" ng-hide="column.isHidden"
                                ng-style="{'min-width': column.rendererParameters['minwidth'], 'max-width': column.rendererParameters['maxwidth']}">
                                <span>{{i18NLabel(column)}}</span>
                            </th>
                        </tr>
                        <tr class="filter-row">
                            <th ng-repeat="column in lookupObj.schema.displayables"
                                ng-hide="column.isHidden" >
                                    <ng-switch on="column.type">
                                        <div ng-switch-when="ApplicationFieldDefinition">
                                            <ng-switch on="column.rendererType">
                                                <div ng-switch-when="datetime" data-datepicker="true" class="input-group input-group-sm">
                                                    <input type="text" ng-model="searchObj[column.attribute]" class="form-control"
                                                           data-date-time
                                                           data-show-time="false"
                                                           data-show-date="{{column.rendererParameters['showdate']}}"
                                                           data-date-format="{{column.rendererParameters['format']}}"
                                                           data-allow-past="{{fieldMetadata.rendererParameters['allowpast']}}"
                                                           data-allow-future="{{fieldMetadata.rendererParameters['allowfuture']}}"
                                                           placeholder="{{i18N('_grid.filter.placeholder','{0} Search',[column.label])}}" ng-enter="lookupModalSearch()" />
                                                    <span class="input-group-addon " data-calendericon="true" rel="tooltip" data-original-title="{{i18N('calendar.date_tooltip','Open the calendar popup')}}">
                                                        <i class="glyphicon glyphicon-calendar"></i>
                                                    </span>
                                                    <div class="input-group-addon dropdown">
                                                        <span class="dropdown-toggle grid-filter-button" ng-class="{'glyphicon glyphicon-filter' : getSearchIcon(column.attribute) == ''}"
                                                              data-toggle="dropdown" rel="tooltip"
                                                              data-original-title="{{getOperator(column.attribute).tooltip}}">{{getSearchIcon(column.attribute)}}</span>

                                                        <ul class="dropdown-menu">
                                                            <li ng-repeat="operation in searchOperations()" ng-click="selectOperator(column.attribute,operation)"
                                                                ng-show="operation.renderType.indexOf(column.rendererType) > -1 || column.rendererType == null"
                                                                ng-class="{'active' : searchOperator[column.attribute].id == operation.id}">
                                                                <a href="#">{{operation.title}}</a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div ng-switch-default class="input-group input-group-sm">
                                                    <span class="input-group">
                                                        <input type="search"
                                                               placeholder="{{i18NLabel(column)}} Search"
                                                               class="form-control" ng-model="searchObj[column.attribute]" ng-enter="lookupModalSearch()" />
                                                        <span class="input-group-addon"
                                                              ng-click="lookupModalSearch()"
                                                              rel="tooltip" data-original-title="{{i18N('search.click','Click to search')}}">
                                                            <i class="glyphicon glyphicon-filter"></i>
                                                        </span>
                                                    </span>
                                                </div>
                                            </ng-switch>
                                        </div>
                                        <div ng-switch-when="OptionField">
                                            <div ng-switch on="column.rendererType">
                                                <div class="input-group" ng-switch-when="combo" class="sw-combobox-container">
                                                    <select class="hidden-phone form-control combobox"
                                                            ng-init="handleDefaultValue(option.extrafields,column)"
                                                            ng-model="searchObj[column.target]"
                                                            ng-options="option.value as option.label for option in GetAssociationOptions(column,true)" />

                                                    <div class="input-group-addon dropdown">
                                                        <span class="dropdown-toggle grid-filter-button" ng-class="{'glyphicon glyphicon-filter' : getSearchIcon(column.attribute) == ''}"
                                                              rel="tooltip"
                                                              ng-click="lookupModalSearch()"
                                                              data-original-title="{{getOperator(column.attribute).tooltip}}">{{getSearchIcon(column.attribute)}}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </ng-switch>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="option in lookupObj.options" ng-click="lookupModalSelect(option)">

                            <td ng-repeat="column in lookupObj.schema.displayables" ng-hide="column.isHidden">
                                <span>{{getFormattedValue(option.extrafields[column.attribute], column, option)}}</span>
                            </td>

                        </tr>
                    </tbody>
                </table>

                <p class="text-center" ng-show="lookupObj.options.length == 0">
                    {{i18N("search.noresult","No criteria matches your search query")}}
                </p>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" ng-click="hideLookupModal()">{{i18N('general.cancel','Cancel')}}</button>
            </div>
        </div>
    </div>
</div>
