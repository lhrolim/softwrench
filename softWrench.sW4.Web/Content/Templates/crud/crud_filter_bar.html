<div ng-show="schema.properties['list.selectionstyle'] === 'multiple'">
    <input type="checkbox" ng-change="toggleSelectAll(selectAll)" ng-model="selectAll">
</div>
<div class="filter-row" hiddenonprint>

    <div class="filter-label"
         ng-repeat="filter in schema.schemaFilters.filters"
         ng-init="markDefaultOperator(filter)"
         filterrowrendered>
        <div class="filter-label-wrapper js_filter">
            <div class="dropdown">
                <div class="wrap" ng-attr-data-toggle="{{ advancedfiltermode ? '' : 'dropdown' }}">
                    {{i18N('_grid.filter.placeholder','{0}',[filter.label])}}: <span class="filter-text">{{getFilterText(filter)}}</span>
                    <i class="fa fa-caret-down grid-filter-button"></i>
                </div>
                <div class="dropdown-menu js_filter_content {{filter.type}}" style="{{filter.style}}" data-id="filter_{{schema.applicationName}}_{{schema.schemaId}}_{{filter.attribute}}">
                    <div class="dropdown-content">
                        <ng-switch on="filter.type">
                            <div ng-switch-when="MetadataDateTimeFilter">
                                
                                <div data-datepicker="true" class="input-group input-group-sm">
                                    <span ng-click="toggleCollapseOperatorList($event)"
                                          class="input-group-addon"
                                          rel="tooltip"
                                          data-original-title="{{ getOperatorTooltip(filter.attribute) }}">
                                        {{ getOperatorIcon(filter.attribute) }}
                                    </span>
                                    <input type="text" ng-model="searchData[filter.attribute]" class="form-control"
                                           data-date-time
                                           data-attach-datepicker-to-parent="true"
                                           data-show-time="{{ !filter.dateOnly }}"
                                           data-allow-past="{{fieldMetadata.rendererParameters['allowpast']}}"
                                           data-allow-future="{{filter.allowFuture}}"
                                           placeholder="{{i18N('_grid.filter.placeholder','{0} Search',[filter.label])}}"
                                           ng-enter="filterSearch(filter.attribute)"
                                           ng-disabled="advancedfiltermode"/>
                                    <span class="input-group-addon "
                                          data-calendericon="true"
                                          rel="tooltip"
                                          data-original-title="{{i18N('calendar.date_tooltip','Open the calendar popup')}}">
                                        <i class="glyphicon glyphicon-calendar"></i>
                                    </span>
                                </div>
                            </div>
                            <div ng-switch-when="MetadataOptionFilter">
                                <filter-multiple-option filter="filter" schema="schema" search-data="searchData" search-operator="searchOperator" apply-filter="filterBarApplied(keepitOpen)"/>
                            </div>

                            <div ng-switch-default>
                                <div class="input-group">
                                    <span ng-click="toggleCollapseOperatorList($event)"
                                          class="input-group-addon"
                                          rel="tooltip"
                                          data-original-title="{{ getOperatorTooltip(filter.attribute) }}">
                                        {{ getOperatorIcon(filter.attribute) }}
                                    </span>
                                    <input type="search" placeholder="{{i18N('_grid.filter.placeholder','{0} Search', [filter.label])}}" class="form-control"
                                           ng-model="searchData[filter.attribute]" ng-enter="filterSearch(filter.attribute)" ng-disabled="advancedfiltermode">
                                    <span ng-click="filterBarApplied()"
                                          class="input-group-addon">
                                        <i class="fa fa-search"></i>
                                    </span>
                                </div>
                            </div>
                        </ng-switch>
                        
                        <div ng-init="operations = displayableSearchOperations(filter)" ng-show="::operations.length > 0">
                            <ul class="js_operator_list list-group collapse">
                                <li class="list-group-item"
                                    ng-repeat="operation in ::operations track by operation.id" 
                                    ng-click="selectOperator(filter.attribute,operation);closeCollapseOperatorList($event)"
                                    ng-enter="filterSearch(filter.attribute)"
                                    ng-class="{'active' : searchOperator[filter.attribute].id === operation.id || (!searchOperator[filter.attribute].id && operation.id === 'CONTAINS')}">
                                    {{::operation.title}}
                                </li>
                            </ul>
                        </div>

                    </div>

                    <div class="filter-dropdown-toolbar" ng-init="filterIsActive=false">
                        <div class="button apply" 
                             ng-class="{ 'active' : !!filterIsActive }"
                             ng-click="filterIsActive=true;filterBarApplied();closeCollapseOperatorList($event)">
                            <i class="fa fa-check"></i>
                            {{i18N('_grid.filter.apply','Apply')}}
                        </div>
                        <div class="button clear" ng-click="filterIsActive=false;clearFilter(filter.attribute)">
                            <i class="fa fa-remove"></i>
                            {{i18N('_grid.filter.clear','Clear')}}
                        </div>
                    </div>
                </div>

            </div>

        </div>
    </div>

</div>