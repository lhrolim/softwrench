<?xml version="1.0" encoding="utf-8" ?>
<metadata xmlns="http://www.example.org/metadata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.example.org/metadata ../../Schema/Metadata.xsd ">

  <templates>
    <template path="@workorder.xml"/>
    <template path="workorderbatch.xml"/>
  </templates>

  <!--otb-->
  <entities>


    <entity name="SR" idAttribute="ticketid">
      <connectorParameters>
        <connectorParameter key="integration_interface" value="SWSR" />
        <connectorParameter key="customconnector" value="softWrench.sW4.Data.Persistence.WS.Commons.BaseServiceRequestCrudConnector" />
      </connectorParameters>
    </entity>

    <entity name="classstructure"  idAttribute="classstructureid" >
      <relationships>
        <relationship to ="classusewith" qualifier="incidentclassstructures">
          <relationshipAttribute from="classstructureid" to="classstructureid" primary="true"/>
          <relationshipAttribute to="objectvalue" literal="INCIDENT" quoteLiteral="true"/>
        </relationship>
      </relationships>
    </entity>

    <entity name="incidentclassifications" parententity="classstructure" idAttribute="classstructureid" >
      <attributes>
        <attribute name="classstructureid" type="varchar" query="CASE WHEN (xyz.classstructureid = classusewith.classstructureid) and (classusewith.objectvalue='INCIDENT')) "/>
      </attributes>
    </entity>

    <entity name="failurecode" idAttribute="failurecodeid">
      <attributes>
        <attribute name="failurecodeid" type="int"  required="true" />
        <attribute name="failurecode" type="varchar"  required="true" />
        <attribute name="description" type="varchar"  required="true" />
        <attribute name="orgid"  type="varchar" />
      </attributes>
    </entity>

    <entity name ="failurelistonly" parententity="failurelist" idAttribute="failurelist" whereclause="((failurelistonly.TYPE is null)) " >

    </entity>

    <entity name ="problemlist" parententity="failurelist" idAttribute="failurelist" whereclause="((problemlist.TYPE like 'PROBLEM')) " >

    </entity>

    <entity name="worktype" idAttribute="worktypeid">
      <attributes>
        <attribute name="worktypeid" type="int"  required="true" />
        <attribute name="worktype" type="varchar"  required="true" />
        <attribute name="wtypedesc" type="varchar"  required="true" />
        <attribute name="orgid"  type="varchar" />
      </attributes>
    </entity>

    <entity name="invbalances" idAttribute="invbalancesid">
      <attributes>
        <attribute name="ib1" type="varchar" required="false" />
      </attributes>
      <relationships>
        <relationship to="item" >
          <relationshipAttribute from="itemnum" to="itemnum" primary="true"/>
        </relationship>
        <relationship to="inventory" >
          <relationshipAttribute from="itemnum" to="itemnum" primary="true"/>
          <relationshipAttribute from="location" to="location" />
          <relationshipAttribute from="siteid" to="siteid" />
          <relationshipAttribute from="itemsetid" to="itemsetid" />
        </relationship>
      </relationships>
      <connectorParameters>
        <connectorParameter key="integration_interface" value="SWINVBAL" />
      </connectorParameters>
    </entity>

    <entity name="inventory" idAttribute="inventoryid">
      <attributes>
        <attribute name="itemnum" type="varchar" required="true" />
        <attribute name="location" type="varchar" required="true" />
        <attribute name="binnum" type="varchar" required="false" />
        <attribute name="vendor" type="varchar" required="false" />
        <attribute name="manufacturer" type="varchar" required="false" />
        <attribute name="modelnum" type="varchar" required="false" />
        <attribute name="catalogcode" type="varchar" required="false" />
        <attribute name="minlevel" type="decimal" required="true" />
        <attribute name="maxlevel" type="decimal" required="true" />
        <attribute name="category" type="varchar" required="true" />
        <attribute name="orderunit" type="varchar" required="false" />
        <attribute name="issueunit" type="varchar" required="true" />
        <attribute name="orderqty" type="decimal" required="true" />
        <attribute name="lastissuedate" type="datetime" required="false" />
        <attribute name="issueytd" type="decimal" required="true" />
        <attribute name="issue1yrago" type="decimal" required="true" />
        <attribute name="issue2yrago" type="decimal" required="true" />
        <attribute name="issue3yrago" type="decimal" required="true" />
        <attribute name="abctype" type="varchar" required="false" />
        <attribute name="ccf" type="int" required="true" />
        <attribute name="sstock" type="decimal" required="false" />
        <attribute name="deliverytime" type="int" required="true" />
        <attribute name="il1" type="varchar" required="false" />
        <attribute name="il5" type="decimal" required="false" />
        <attribute name="glaccount" type="varchar" required="false" />
        <attribute name="controlacc" type="varchar" required="true" />
        <attribute name="shrinkageacc" type="varchar" required="false" />
        <attribute name="invcostadjacc" type="varchar" required="false" />
        <attribute name="sourcesysid" type="varchar" required="false" />
        <attribute name="ownersysid" type="varchar" required="false" />
        <attribute name="externalrefid" type="varchar" required="false" />
        <attribute name="sendersysid" type="varchar" required="false" />
        <attribute name="orgid" type="varchar" required="true" />
        <attribute name="siteid" type="varchar" required="true" />
        <attribute name="internal" type="smallint" required="true" />
        <attribute name="inventoryid" type="int" required="true" />
        <attribute name="itemsetid" type="varchar" required="true" />
        <attribute name="storeloc" type="varchar" required="false" />
        <attribute name="storelocsiteid" type="varchar" required="false" />
        <attribute name="rowstamp" type="timestamp" required="false" />
      </attributes>
      <connectorParameters>
        <connectorParameter key="dbtable" value="inventory" />
      </connectorParameters>
    </entity>

    <entity name="workorder" idAttribute="wonum" whereclause="woclass like 'WORKORDER'">
      <relationships>
        <relationship to="invissue" collection="true">
          <relationshipAttribute from="wonum" to="refwo" primary="true" />
          <relationshipAttribute from="siteid" to="siteid" />
        </relationship>
      </relationships>
      <connectorParameters>
        <connectorParameter key="integration_interface" value="SWWO" />
        <connectorParameter key="customconnector" value="softWrench.sW4.Data.Persistence.WS.Commons.BaseWorkOrderCrudConnector" />
      </connectorParameters>
    </entity>

    <entity name="incident" idAttribute="ticketid">
      <connectorParameters>
        <connectorParameter key="dbtable" value="incident" />
        <connectorParameter key="integration_interface" value="SWINCIDENT" />
        <connectorParameter key="customconnector" value="softWrench.sW4.Data.Persistence.WS.Commons.BaseIncidentCrudConnector" />
      </connectorParameters>
    </entity>

    <entity name="wochange" idAttribute="workorderid">
      <attributes>
        <attribute name="workorderid" type="integer" required="true" />

      </attributes>
      <relationships>
        <relationship to="longdescription">
          <relationshipAttribute from="workorderid" to="ldkey" primary="true"/>
          <relationshipAttribute to="ldownertable" literal="WORKORDER" quoteLiteral="true" />
          <relationshipAttribute to="ldownercol" literal="DESCRIPTION" quoteLiteral="true" />
        </relationship>
        <relationship to="longdescription" qualifier="reasonforchange">
          <relationshipAttribute from="workorderid"  to="ldkey" primary="true"/>
          <relationshipAttribute to="ldownertable" literal="WORKORDER" quoteLiteral="true" />
          <relationshipAttribute to="ldownercol" literal="REASONFORCHANGE" quoteLiteral="true" />
        </relationship>
        <relationship to="longdescription" qualifier="backoutplan">
          <relationshipAttribute from="workorderid" to="ldkey" primary="true"/>
          <relationshipAttribute to="ldownertable" literal="WORKORDER" quoteLiteral="true" />
          <relationshipAttribute to="ldownercol" literal="BACKOUTPLAN" quoteLiteral="true" />
        </relationship>
        <relationship to="longdescription" qualifier="pretestdetail">
          <relationshipAttribute from="workorderid" to="ldkey" primary="true"/>
          <relationshipAttribute to="ldownertable" literal="WORKORDER" quoteLiteral="true" />
          <relationshipAttribute to="ldownercol" literal="ITDCHGPRETSTDTL" quoteLiteral="true" />
        </relationship>
        <relationship to="longdescription" qualifier="exceptionreason">
          <relationshipAttribute from="workorderid" to="ldkey" primary="true"/>
          <relationshipAttribute to="ldownertable" literal="WORKORDER" quoteLiteral="true" />
          <relationshipAttribute to="ldownercol" literal="EXCEPTIONREASON" quoteLiteral="true" />
        </relationship>
        <relationship to="workorder">
          <relationshipAttribute from="wonum" to="parent" primary="true"/>
          <relationshipAttribute from="siteid" to="siteid" />
        </relationship>
        <relationship to="pmchgotherapprovers" qualifier="approvalsdashboard">
          <relationshipAttribute from="wonum" to="wonum" primary="true" />
          <relationshipAttribute from="siteid" to="siteid" />
        </relationship>
        <relationship to="woactivity" qualifier="woactivitydashboard">
          <relationshipAttribute from="wonum" to="parent" primary="true" />
          <relationshipAttribute from="siteid" to="siteid" />
        </relationship>
        <relationship to="worklog">
          <relationshipAttribute from="wonum" to="recordkey" primary="true" />
          <relationshipAttribute from="siteid" to="siteid" />
          <relationshipAttribute to="class" literal="CHANGE" quoteLiteral="true" />
        </relationship>
      </relationships>
      <connectorParameters>
        <connectorParameter key="integration_interface" value="SWCH" />
        <connectorParameter key="customconnector" value="softWrench.sW4.Data.Persistence.WS.Commons.BaseChangeRequestCrudConnector" />
      </connectorParameters>
    </entity>

    <entity name="commodities" idAttribute="commoditiesid">
      <relationships>
        <relationship to="assetloccomm" qualifier="selectedcommodities">
          <relationshipAttribute from="commodity" to="commodity" primary="true"/>
          <relationshipAttribute from="itemsetid" to="itemsetid" />
          <relationshipAttribute to="assetnum" literal=":commodityassetnum" quoteLiteral="false" />
        </relationship>
      </relationships>
    </entity>

    <entity name="pr" idAttribute="prnum">
      <relationships>
        <relationship to="companies">
          <relationshipAttribute from="vendor" to="company" primary="true"/>
          <relationshipAttribute to="type" literal="V" quoteLiteral="true"/>
        </relationship>
        <relationship to="contract">
          <relationshipAttribute from="contractrefnum" to="contractnum" primary="true"/>
          <relationshipAttribute from="vendor" to="vendor" />
        </relationship>
        <relationship to ="prline" qualifier="prline" collection ="true">
          <relationshipAttribute from="prnum" to="prnum" primary="true"/>

          <relationshipAttribute from="siteid" to ="siteid"/>
          <relationshipAttribute from ="orgid" to="orgid"/>
        </relationship>
        <relationship to="prterm" collection ="true">
          <relationshipAttribute from="prnum" to="prnum" primary="true"/>
          <relationshipAttribute from="siteid" to ="siteid"/>
          <relationshipAttribute from ="orgid" to="orgid"/>
        </relationship>
      </relationships>
      <connectorParameters>
        <connectorParameter key="integration_interface" value="SWPR" />
        <connectorParameter key="customconnector" value="softWrench.sW4.Data.Persistence.WS.Commons.BasePurchaseRequestCrudConnector" />
      </connectorParameters>
    </entity>

    <entity name="prterm" idAttribute ="prtermid">
      <relationships>
        <relationship to="term" >
          <relationshipAttribute from="termid" to="termid" primary="true"/>
          <relationshipAttribute from="siteid" to ="siteid"/>
        </relationship>
      </relationships>
    </entity>

    <entity name="prline" idAttribute="prlinenum">
      <relationships>
        <relationship to ="item">
          <relationshipAttribute from ="itemnum" to="itemnum" primary="true"/>
        </relationship>
        <relationship to ="tax" qualifier="tax" collection="true">
          <relationshipAttribute from="tax1code" to ="taxcode" primary="true"/>
          <relationshipAttribute from="orgid" to="orgid"/>
        </relationship>
      </relationships>
    </entity>

    <entity name="inboundcomm" idAttribute="inboundcommid">
      <relationships>
        <relationship to="commlog" collection="true">
          <relationshipAttribute from="objectkey" to ="ownerid" primary="true"/>
        </relationship>
      </relationships>
    </entity>

    <entity name="invissue" idAttribute="matusetransid" parententity="matusetrans" whereclause="(ISSUETYPE = 'ISSUE' or ISSUETYPE = 'RETURN')">
      <connectorParameters>
        <connectorParameter key="customconnector" value="softWrench.sW4.Data.Persistence.WS.Commons.BaseInventoryIssueCrudConnector" />
      </connectorParameters>
    </entity>

    <entity name="matrectransTransfers" parententity="matrectrans" idAttribute="matrectransid" whereclause="issuetype='TRANSFER'">
      
    </entity>

    <entity name="invuse" idAttribute="invuseid">
      <relationships>
        <relationship to="invuseline">
          <relationshipAttribute from="invusenum" to="invusenum" primary="true"/>
          <relationshipAttribute from="siteid" to="siteid"/>
          <relationshipAttribute from="fromstoreloc" to="fromstoreloc"/>
          <relationshipAttribute from="usetype" to="usetype"/>
        </relationship>
        <relationship to="invcost">
          <relationshipAttribute from="itemnum" to="itemnum" primary="true"/>
          <relationshipAttribute from="fromstoreloc" to="location"/>
          <relationshipAttribute from="itemsetid" to="itemsetid"/>
          <relationshipAttribute from="siteid" to="siteid"/>
        </relationship>
        <relationship to="inventory">
          <relationshipAttribute from="invuseline_.itemnum" to="itemnum"/>
          <relationshipAttribute from="invuseline_.siteid" to="siteid"/>
          <relationshipAttribute from="invuseline_.itemsetid" to="itemsetid"/>
          <relationshipAttribute from="invuseline_.fromstoreloc" to="location" primary="true"/>
        </relationship>
        <relationship to="location" qualifier="fromlocation">
          <relationshipAttribute from="invuseline_.fromstoreloc" to="location" primary="true"/>
          <relationshipAttribute from="invuseline_.siteid" to="siteid"/>
          <relationshipAttribute from="invuseline_.itemsetid" to="itemsetid"/>
        </relationship>
        <relationship to="invbalances" qualifier="frominvbalance">
          <relationshipAttribute from="invuseline_.itemnum" to="itemnum"/>
          <relationshipAttribute from="invuseline_.siteid" to="siteid"/>
          <relationshipAttribute from="invuseline_.itemsetid" to="itemsetid"/>
          <relationshipAttribute from="invuseline_.fromstoreloc" to="location"/>
          <relationshipAttribute from="invuseline_.frombin" to="binnum" primary="true"/>
        </relationship>
        <relationship to="location" qualifier="tolocation">
          <relationshipAttribute from="invuseline_.tostoreloc" to="location" primary="true"/>
          <relationshipAttribute from="invuseline_.siteid" to="siteid"/>
          <relationshipAttribute from="invuseline_.itemsetid" to="itemsetid"/>
        </relationship>
        <relationship to="invbalances" qualifier="toinvbalance">
          <relationshipAttribute from="invuseline_.itemnum" to="itemnum"/>
          <relationshipAttribute from="invuseline_.tostoreloc" to="location"/>
          <relationshipAttribute from="invuseline_.tobin" to="binnum" primary="true"/>
        </relationship>
        <relationship to="item">
          <relationshipAttribute from="invuseline_.itemnum" to="itemnum" primary="true"/>
          <relationshipAttribute from="invuseline_.itemsetid" to="itemsetid"/>
        </relationship>
      </relationships>
      <connectorParameters>
        <connectorParameter key="integration_interface" value="SWINVUSE"/>
        <connectorParameter key="customconnector" value="softWrench.sW4.Data.Persistence.WS.Commons.BaseInvuseCrudConnector"/>
      </connectorParameters>
    </entity>

    <entity name="po" idAttribute="ponum">
      <relationships>
        <relationship to="synonymdomain" qualifier="postatus">
          <relationshipAttribute from="status" to="value" primary="true"/>
          <relationshipAttribute to="domainid" literal="POSTATUS" quoteLiteral="true"/>
        </relationship>
        <relationship to="synonymdomain" qualifier="potype">
          <relationshipAttribute from="status" to="value" primary="true"/>
          <relationshipAttribute to="domainid" literal="POTYPE" quoteLiteral="true"/>
        </relationship>
        <relationship to="currency" qualifier="currency" collection="true">
          <relationshipAttribute from="currencycode" to="currencycode" primary="true"/>
        </relationship>
        <relationship to="companies" qualifier="companies" collection="true">
          <relationshipAttribute from="vendor" to="company" primary="true"/>
          <relationshipAttribute to="type" literal="V" quoteLiteral="true"/>
        </relationship>
        <relationship to ="poline" qualifier="poline" collection ="true">
          <relationshipAttribute from="ponum" to="ponum" primary="true"/>
          <relationshipAttribute from="siteid" to ="siteid"/>
          <relationshipAttribute from ="orgid" to="orgid"/>
        </relationship>
      </relationships>
    </entity>

    <entity name="poline" idAttribute="polinenum">
      <relationships>
        <relationship to ="item">
          <relationshipAttribute from ="itemnum" to="itemnum" primary="true"/>
        </relationship>
      </relationships>
    </entity>
  </entities>

 
</metadata>