<?xml version="1.0" encoding="utf-8" ?>
<metadata xmlns="http://www.controltechnologysolutions.com/metadata">

 
  
  <applications>
    
    
    <application name="attachment" title="Attachment" entity="DOCLINKS">
      <properties>
        <property key="mobile.fetchlimit" value="300"/>
        <property key ="icon.composition.tab" value="fa fa-paperclip"/>
        <property key ="add.button.label" value="Add Attachment"/>
      </properties>
      <schemas>
        <!-- #region:Mobile -->
        <list stereotype="compositionlist" platform="mobile" title="Attachments">
          <field label="Id" hidden="true" attribute="docinfoid"/>
          <field hidden="true" attribute="ownerid"/>
          <field hidden="true" attribute="doclinksid"/>
          <field label="Document" attribute="document" qualifier="title"/>
          <field label="Created Date" attribute="createdate" qualifier="subtitle"/>
          <field hidden="true" attribute="docinfo_.urlname"/>
          <field hidden="true" attribute="maximoURL"/>
          <!--this shall hold the hash of the file to prevent a second offline download -->
          <field hidden="true" attribute="docinfo_.urlparam2"/>
        </list>
        
        <schema id="detail" platform="mobile" title="Attachments">
          <field label="Title" attribute="document" requiredexpression="true" />
          <field label="Description" attribute="docinfo_.description" />
          <field label="Attachment" attribute="newattachment" requiredexpression="true">
            <renderer type="upload"/>
          </field>
          <field attribute="createdate" default="@now" readonly="true" label="Created Date"/>
          <commandbars>
            <commandgroup platform="mobile" position="mobile.fab">
              <command id="picture" service="offlineAttachmentService" method="attachCameraPicture" 
                       icon="ion-android-camera" label="Take Picture" cssclasses="green" />
            </commandgroup>
          </commandbars>
        </schema>
        
        <!-- #endregion -->

        <list stereotype="compositionlist" platform="web">
          <properties>
            <property key="detail.cancel.lbl" value="Close"/>
            <property key="expansible" value="false"/>
            <property key="list.click.service" value="attachmentService.selectAttachment"/>
            <property key="list.search.quicksearchfields" value="document"/>
            <!--<property key="compositions.disable.filter" value="false"/>-->
          </properties>

          <filters>
            <filter attribute="#parsedurl" label="Document" style="width:300px" whereclause="description like (!@#value)" />
          </filters>
          
          <field hidden="true" attribute="ownerid"/>
          <field label="Id" hidden="true" attribute="docinfoid"/>
          <field hidden="true" attribute="doclinksid"/>
          <field label="Application" attribute="ownertable" >
            <renderer type="icon" params="expression={'COMMLOG':'fa-envelope','SR':''};width=10%;showattribute=true"/>
          </field>

          <field hidden="true" attribute="docinfo_.description"/>
          <field hidden="true" attribute="docinfo_.urlname"/>
          <field hidden="true" attribute="docinfo_.urltype"/>
          <field  attribute="document" hidden="true"/>
          <field label="Document"  attribute="#parsedurl"/>
<!--          <section attribute="document"-->
<!--									   resourcepath="/Content/Templates/downloadattachment.html" parameters="controller=Attachment;action=Download;idcolumn=docinfoid;mode=http"/>-->
          <field attribute="createby" hidden="true"/>
          <field label="Created Date" attribute="createdate"/>
          <field label="Type" attribute="doctype" hidden="true"/>

          <event type="onremoval.validation" service="attachmentService" method="validateRemoval"/>

          <commandbars>
            <commandgroup position="detail.primary" removeundeclared="true">
              <command id="additem" icon="$scope:getAddIcon" service="$scope" method="newDetailFn" label="$scope:getAddLabel" showexpression="$scope:shouldShowAdd"/>
              <!--<command id="save" icon="fa-check" service="$scope" method="save" label="Save" />-->
              <!--<command id="cancel" icon="fa-times" service="$scope" method="cancel" label="Cancel" />-->
            </commandgroup>
          </commandbars>
        </list>

        <schema id="faqAttachments" stereotype="compositionlist" platform="web">
          <field label="Id" hidden="true" attribute="docinfoid"/>
          <field hidden="true" attribute="doclinksid"/>
          <field label="Document" hidden="true" attribute="document"/>
          <section attribute="document" resourcepath="/Content/Templates/downloadattachment.html" parameters="controller=Faq;action=Download;idcolumn=docinfoid"/>
        </schema>

        <schema id="detail" title="Attachments" platform="web">
          <field hidden="true" attribute="doclinksid"/>
          <field hidden="true" attribute="ownerid"/>
          <field label="Id" hidden="true" attribute="docinfoid"/>
          <field label="Title" attribute="document" requiredexpression="true" />
          <field attribute="createby" hidden="true"/>
          <!--Description is not a required field - please fix for expand all / collapse all-->
          <field label="Description" attribute="docinfo_.description" />
          <field label="Attachment" attribute="newattachment" requiredexpression="true">
            <renderer type="dndupload"/>
          </field>
          <!--          <field hidden="true" attribute="ownerid"/>-->
          <!--          <field hidden="true" attribute="ownertable"/>-->
          <field hidden="true" attribute="createdate"/>
          <commandbars>
            <commandgroup position="detail.primary">
              <command id="crud_delete" label="Delete" service="crudextraService" method="deletefn" parameters="schema,datamap"
                       showexpression="@status=='NEW'" successmessage="Attachment deleted"/>
            </commandgroup>
          </commandbars>
          
        </schema>

      </schemas>
    </application>

  </applications>




</metadata>
