<?xml version="1.0" encoding="utf-8" ?>
<metadata xmlns="http://www.controltechnologysolutions.com/metadata">
  <applications>
    <application entity="PropertyDefinition" name="configuration" title="Configuration">
      <properties>
        <!-- the detail schema is a fake list in this case -->
        <property key="application.mainlistschema" value="detail"/> 
        <property key="application.security.clientadmin" value="true"/> 
      </properties>
      
      <schemas>
        <detail title="Configuration">
          <commandbars>
            <commandgroup position="detail.primary">
              <removecommand id="save"/>
              <command id="cancel" service="redirectService" method="redirectToHome"/>
            </commandgroup>
          </commandbars>
          <composition detailschema="trueDetail" fetchtype="eager"  relationship="#properties"  printschema="" inline="true">
            <collectionproperties allowcreation="false" listschema="list" allowupdate="true"/>
          </composition>
          <event type="onschemafullyloaded" service="configurationService" method="loadConfigsComposition"/>

          <properties>
            <property key="compositions.keepfilters" value="true"/>
          </properties>
        </detail>

        <schema id="list" stereotype="list">
          <field attribute="fullkey" label="Full Key"/>
          <field attribute="description" label="Description"/>
          <field attribute="datatype" hidden="true"/>
          <field attribute="minvalue" hidden="true" />
          <field attribute="maxvalue" hidden="true" />
          <section attribute="currentvalue" resourcepath="/Content/Templates/crud/configuration/configuration_grid_value.html">
            <header label="Current Value"/>
          </section>
        </schema>

        <schema id="trueDetail"  stereotype="compositiondetail" title="Configuration Entry">
          <field attribute="fullkey" label="Full Key" readonly="true"/>
          <field attribute="description" label="Description" readonly="true"/>
          <field attribute="minvalue_" hidden="true" />
          <field attribute="maxvalue_" hidden="true" />
          <section attribute="value" resourcepath="/Content/Templates/crud/configuration/configuration_detail_value.html"/>
          <event type="beforesubmit.onvalidation" service="configurationService" method="validateValue"/>
          
        </schema>
      </schemas>
    </application>
  </applications>
</metadata>
