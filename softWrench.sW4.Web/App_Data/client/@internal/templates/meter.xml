<?xml version="1.0" encoding="utf-8" ?>
<metadata xmlns="http://www.controltechnologysolutions.com/metadata">


  <entities>
    <entity name="METERREADING" idAttribute="METERREADINGID">
      <!--This entity is declared just to use the wsdl out of it, it´s not indeed used for querying-->
      <attributes>
        <attribute name="METERREADINGID" type="int"/>
      </attributes>
      <connectorParameters>
        <connectorParameter key="dbtable" value="METERREADING" />
        <connectorParameter key="integration_interface" value="SWMETERDATA" />
      </connectorParameters>
    </entity>
  </entities>

  <applications>
    
    
    <application name="assetmeter" title="Asset Meter" entity="assetmeter">
      <properties>
        <property key="mobile.fetchlimit" value="300"/>
      </properties>
      <schemas>
        <schema id="composition" stereotype="compositionlist" title="Asset Meter Readings">
          <field attribute="assetmeterid" hidden="true"/>
          <field attribute="metername" hidden="true"/>
          <field attribute="meter_.domainid" hidden="true"/>
          <field label="Meter" attribute="meter_.description"/>
          <field label="Meter Type" attribute="meter_.metertype"/>
          <field label="Last Reading" attribute="lastreading"/>
          <field label="Last Reading Date" attribute="lastreadingdate">
            <renderer type="datetime"/>
          </field>
          <field label="New Reading" attribute="newreading" requiredexpression="true" showexpression="@meter_.domainid == null">
            <renderer type="default" params="editable=true"/>
          </field>
          <association label="New Reading" target="newreading" valuefield="meter_.alndomain_.value" labelfield="meter_.alndomain_.description" requiredexpression="true" 
                       showexpression="@meter_.domainid != null">
            <renderer type="lookup" />
            <dataprovider whereClause="metername = !@metername"/>
          </association>
          <field label="New Reading Date" attribute="newreadingdate" requiredexpression="true" default="@now">
            <renderer type="datetime" params="editable=true;format=MM/dd/yyyy HH:mm:ss;width=20%"/>
          </field>
          <field label="Rollover" attribute="disabledrollover" enableexpression="false" hidden="true">
            <renderer type="checkbox" params="editable=true;width=5%"/>
          </field>
          <field attribute="rollover" hidden="true"/>
          <field attribute="inspector" default="@username" hidden="true"></field>
<!--          <association labelfield="inspector_.displayname" valuefield="personid" target="inspector" label="Inspector" requiredexpression="true" default="@username">-->
<!--            <renderer type="lookup" params="editable=true;width=10%"/>-->
<!--          </association>-->
          <commandbars>
            <commandgroup position="compositionbottom">
              <removecommand id="additem"/>
              <removecommand id="print"/>
            </commandgroup>
          </commandbars>
        </schema>
      </schemas>
    </application>

    <application name="locationmeter" title="Location Meter" entity="locationmeter">
      <properties>
        <property key="mobile.fetchlimit" value="300"/>
      </properties>
      <schemas>
        <schema id="composition" stereotype="compositionlist" title="Location Meter Readings">
          <field attribute="locationmeterid" hidden="true"/>
          <field attribute="metername" hidden="true"/>
          <field label="Meter" attribute="meter_.description"/>
          <field label="Meter Type" attribute="meter_.metertype"/>
          <field label="Last Reading" attribute="lastreading"/>
          <field label="Last Reading Date" attribute="lastreadingdate">
            <renderer type="datetime"/>
          </field>
          <field label="New Reading" attribute="newreading" requiredexpression="true">
            <renderer type="default" params="editable=true"/>
          </field>
          <field label="New Reading Date" attribute="newreadingdate" requiredexpression="true">
            <renderer type="datetime" params="editable=true"/>
          </field>
          <field label="Rollover" attribute="disabledrollover" enableexpression="false">
            <renderer type="checkbox" params="editable=true"/>
          </field>
          <field attribute="rollover" hidden="true"/>
            
          <association labelfield="inspector_.displayname" target="inspector" valuefield="personid" label="Inspector" requiredexpression="true">
            <renderer type="lookup"  params="editable=true"/>
          </association>
          <commandbars>
            <commandgroup position="compositionbottom">
              <removecommand id="additem"/>
              <removecommand id="print"/>
            </commandgroup>
          </commandbars>
        </schema>
      </schemas>
    </application>


  </applications>




</metadata>
