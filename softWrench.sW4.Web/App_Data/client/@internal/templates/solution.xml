<?xml version="1.0" encoding="utf-8" ?>
<metadata xmlns="http://www.controltechnologysolutions.com/metadata">

  <entities>
    <entity name="solution" idAttribute="solutionid" useridAttribute="solution">
      <relationships>
        <relationship to="longdescription" qualifier="symptom">
          <relationshipAttribute from="solutionid" to="ldkey" primary="true" />
          <relationshipAttribute to="ldownertable" literal="SOLUTION" quoteLiteral="true" />
          <relationshipAttribute to="ldownercol" literal="PROBLEMCODE" quoteLiteral="true" />
        </relationship>
        <relationship to="longdescription" qualifier="cause">
          <relationshipAttribute from="solutionid" to="ldkey" primary="true" />
          <relationshipAttribute to="ldownertable" literal="SOLUTION" quoteLiteral="true" />
          <relationshipAttribute to="ldownercol" literal="FR1CODE" quoteLiteral="true" />
        </relationship>
        <relationship to="longdescription" qualifier="resolution">
          <relationshipAttribute from="solutionid" to="ldkey" primary="true" />
          <relationshipAttribute to="ldownertable" literal="SOLUTION" quoteLiteral="true" />
          <relationshipAttribute to="ldownercol" literal="FR2CODE" quoteLiteral="true" />
        </relationship>
        <relationship to="DOCLINKS" qualifier="attachment" collection="true">
          <relationshipAttribute from="solutionid" to="ownerid" primary="true" />
          <relationshipAttribute to="ownertable" literal="SOLUTION" quoteLiteral="true" />
        </relationship>
      </relationships>
      <connectorParameters>
        <connectorParameter key="dbtable" value="solution" />
        <connectorParameter key="integration_interface" value="SWSOLUTION" />
        <connectorParameter key="customconnector" value="softWrench.sW4.Data.Persistence.WS.Commons.BaseSolutionCrudConnector" />
      </connectorParameters>
    </entity>
  </entities>

  <applications>
    <application name="solution" title="solution" entity="solution">
      <properties>
        <property key="icon.composition.tab" value="fa fa-book" />
      </properties>
      <schemas>
        <list title="Solution Grid" platform="web">
          <field attribute="solution" label="Solution#">
            <renderer type="default" params="widthXS=30%;widthSM=20%;widthMD=15%;widthLG=10%" />
          </field>
          <field attribute="description" label="Description">
            <renderer type="default" params="excelwidth=50" />
          </field>
          <field attribute="status" label="Status">
            <renderer type="default" params="widthXS=20%;widthSM=20%;widthMD=15%;widthLG=10%" />
          </field>
          <properties>
            <property key="list.click.schema" value="editdetail" />
          </properties>
        </list>

        <schema id="complist" stereotype="compositionlist">
          <field attribute="solution" label="Solution#" />
          <field attribute="description" label="Description" />
        </schema>

        <detail stereotype="compositiondetail">
          <field attribute="solution" label="Solution#" readonly="true" />
          <field attribute="problemcode" label="Symptom:" />
          <field attribute="fr1code" label="Cause:" />
          <field attribute="fr2code" label="Resolution:" />
        </detail>

        <schema id="adetail" title="Solution Details" abstract="true" stereotype="detail" platform="web">

          <section orientation="horizontal">
            <field attribute="solution" label="Solution#" readonly="true">
              <renderer type="default" />
            </field>
            <section id="statussection" />
          </section>

          <section>
            <header displacement="ontop" label="Solution Details" params="fieldset=true" />
            <field attribute="description" label="Description" requiredexpression="true" />
            <field attribute="symptom_.ldtext" label="Symptom:">
              <renderer type="richtext" />
            </field>
            <field attribute="cause_.ldtext" label="Cause:">
              <renderer type="richtext" />
            </field>
            <field attribute="resolution_.ldtext" label="Resolution:">
              <renderer type="richtext" />
            </field>
          </section>
        </schema>

        <schema parentschema="adetail" id="editdetail" stereotype="detail" platform="web">
          <section id="statussection">
            <optionfield attribute="status" label="Status" requiredexpression="true">
              <renderer type="combo" />
              <option label="DRAFT" value="DRAFT" />
              <option label="ACTIVE" value="ACTIVE" />
              <option label="INACTIVE" value="INACTIVE" />
            </optionfield>
          </section>
          <event type="beforesubmit.prevalidation" service="solutionService" method="validateStatus" />
        </schema>

        <schema parentschema="adetail" id="newdetail" stereotype="detail" platform="web">
          <section id="statussection">
            <field attribute="status" label="Status" enableexpression="false">
              <renderer type="default" />
            </field>
          </section>
        </schema>
      </schemas>
    </application>
  </applications>
</metadata>