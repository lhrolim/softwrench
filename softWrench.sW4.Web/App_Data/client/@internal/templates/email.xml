<?xml version="1.0" encoding="utf-8" ?>
<metadata xmlns="http://www.controltechnologysolutions.com/metadata">
  <entities>
    <entity name="email" idAttribute="emailid">
      <attributes>
        <attribute name="loweremail" query="LOWER(emailaddress)" type="string"/>
      </attributes>
      <connectorParameters>
        <connectorParameter key="integration_interface" value="SWEMAIL"/>
        <connectorParameter key="integration_interface_operations" value="CRUD_DELETE"/>
      </connectorParameters>
      
      
    </entity>
    
  </entities>

  <applications>
    <application name="email" title="Email" entity="email">
      <properties>
        <property key ="icon.composition.tab" value="fa fa-envelope-o"/>
      </properties>
      <schemas>
        <schema id="list" stereotype="compositionlist" title="Email List">
          <field attribute="personid" hidden="true"/>
          <field attribute="emailid" hidden="true"/>
          <field attribute="loweremail" hidden="true"/>
          <field attribute="emailaddress" label="Email Address"/>
          <field attribute="type" label="Type"/>
          <field attribute="isprimary" label="Primary">
            <renderer type="checkbox"/>
          </field>
        </schema>
        <schema id="detail" stereotype="compositiondetail" title="Email Detail">
          <field attribute="personid" hidden="true"/>
          <field attribute="emailid" hidden="true"/>
          <field attribute="loweremail" hidden="true"/>
          <field attribute="emailaddress" label="Email Address" requiredexpression="true"/>
          <optionfield attribute="type" label="Type" providerattribute="_EmailTypeOptions" requiredexpression="true">
            <renderer type="autocompleteclient" />
          </optionfield>
          <field attribute="isprimary" label="Primary" enableexpression="@originalprimary == false" defaultexpression="service:emailService.isPrimary">
            <renderer type="checkbox"/>
          </field>
          <event type="onschemafullyloaded" service="personService" method="loadEmail"/>
        </schema>
      </schemas>
    </application>
  </applications>
</metadata>