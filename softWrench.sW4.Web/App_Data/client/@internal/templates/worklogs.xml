<?xml version="1.0" encoding="utf-8" ?>
<metadata xmlns="http://www.controltechnologysolutions.com/metadata">

  <entities>
    <entity name="worklog" idAttribute="worklogid" >
      <attributes>
        <attribute name="worklogid" type="bigint" required="true" />
        <attribute name="logtype" type="varchar" required="true" />
        <attribute name="createby" type="varchar" required="true" />
        <attribute name="createdate" type="datetime" required="true" />
        <attribute name="clientviewable" type="smallint" required="true" />
        <attribute name="description" type="varchar" required="false" />
        <attribute name="siteid" type="varchar" required="false" />
        <attribute name="orgid" type="varchar" required="false" />
        <attribute name="modifyby" type="varchar" required="true" />
        <attribute name="modifydate" type="datetime" required="true" />
        <attribute name="recordkey" type="varchar" required="true" />
        <attribute name="class" type="varchar" required="true" />
        <attribute name="langcode" type="varchar" required="true" />
        <attribute name="hasld" type="smallint" required="true" />
        <attribute name="rowstamp" type="timestamp" required="true" />
        <attribute name="assignmentid" type="bigint" required="false" />
      </attributes>
      <relationships>
        <relationship to="longdescription" qualifier="wld" >
          <relationshipAttribute from="worklogid" to="ldkey" primary="true"/>
          <relationshipAttribute to="ldownertable" literal="WORKLOG" quoteLiteral="true" />
          <relationshipAttribute to="ldownercol" literal="DESCRIPTION" quoteLiteral="true" />
        </relationship>
        <relationship to="synonymdomain" >
          <relationshipAttribute from="logtype" to="value" primary="true"/>
          <relationshipAttribute to="domainid" literal="LOGTYPE" quoteLiteral="true"/>
          <!--<relationshipAttribute to="defaults" literal="1" quoteLiteral="true"/>-->
        </relationship>
        <relationship to="person" qualifier="createdbyperson" >
          <relationshipAttribute from="createby" to="personid" primary="true"/>
        </relationship>
      </relationships>
      <connectorParameters>
        <connectorParameter key="mea_integration_interface" value="ISW_WL" />
      </connectorParameters>

    </entity>


  </entities>

  <applications>
    <application name="worklog" title="Work Logs" entity="worklog" id="00000000-0000-0000-0000-000000000008">
      <properties>
        <property key="mobile.userInteractionEnabled" value="false"/>
        <property key="mobile.fetchlimit" value="300"/>
        <property key="list.schema.mode" value="input"/>
        <property key="icon.composition.tab" value="fa fa-gavel ion-ios-chatbubble-outline"/>
        <property key="add.button.label" value="Add Work Log"/>
      </properties>
      <schemas>
        <schema id="list"  stereotype="compositionlist">
          <field attribute="worklogid" hidden="true" />
          <field attribute="recordkey" label="Record Key" hidden="true" />
          <field attribute="class" label="Class" hidden="true" />
          <field attribute="createdate" label="Date" hidden="true"/>
          <field attribute="createby" label="Created By" />
          <field attribute="modifydate" label="Last Changed Date" qualifier="subtitle">
            <renderer type="datetime" params="format=MM/dd/yyyy"/>
          </field>
          <field attribute="description" label="Summary" qualifier="title"/>
          <field attribute="synonymdomain_.description" label="Log Type"/>
          <field attribute="clientviewable" label="Client Viewable">
            <renderer type="default" params="formatter=numberToBoolean"/>
          </field>
          <field attribute="logtype" hidden="true"/>
          <properties>
            <property key="list.search.quicksearchfields" value="description"/>
          </properties>

        </schema>

        <detail stereotype="compositiondetail" title="Work Log">
          <field attribute="createdate" hidden="true" />

          <field attribute="description" label="Summary" requiredexpression="true">
            <renderer type="default" params="maxlength=100"/>
          </field>
          <field attribute="wld_.ldtext" label="Details" >
            <renderer type="richtext"/>
          </field>
          <section orientation="horizontal">
            <renderer type="default" params="childinputsize=medium" />
            <optionfield attribute="logtype" label="Log Type" default="CLIENTNOTE">
              <option label="Appointment Note" value="APPTNOTE"/>
              <option label="Client Note" value="CLIENTNOTE"/>
              <option label="Update" value="UPDATE"/>
              <option label="Work" value="WORK"/>
            </optionfield>
            <optionfield attribute="clientviewable" label="Client Viewable" default="0">
              <option label="Yes" value="1"/>
              <option label="No" value="0"/>
            </optionfield>
          </section>

          <!-- attachment placeholder -->
          <!-- TODO: use section+id instead of field when it's eventually possible -->
          <field attribute="position_attachment" hidden="true"></field>

        </detail>

      </schemas>
    </application>

  </applications>




</metadata>
