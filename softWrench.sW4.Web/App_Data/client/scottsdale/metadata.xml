<?xml version="1.0" encoding="utf-8" ?>
<metadata xmlns="http://www.controltechnologysolutions.com/metadata">

  <entities>
    <entity name="SR" idAttribute="ticketid">
      <attributes>
        <attribute name="accumulatedholdtime" type="double" required="false" />
        <attribute name="actlabcost" type="double" required="true" />
        <attribute name="actlabhrs" type="double" required="true" />
        <attribute name="actualcontactdate" type="timestamp" required="false" />
        <attribute name="actualfinish" type="timestamp" required="false" />
        <attribute name="actualstart" type="timestamp" required="false" />
        <attribute name="adjustedtargetcontacttime" type="timestamp" required="false" />
        <attribute name="adjustedtargetresolutiontime" type="timestamp" required="false" />
        <attribute name="adjustedtargetresponsetime" type="timestamp" required="false" />
        <attribute name="affecteddate" type="timestamp" required="false" />
        <attribute name="affectedemail" type="varchar" required="false" />
        <attribute name="affectedperson" type="varchar" required="false" />
        <attribute name="affectedphone" type="varchar" required="false" />
        <attribute name="assetnum" type="varchar" required="false" />
        <attribute name="assetorgid" type="varchar" required="false" />
        <attribute name="assetsiteid" type="varchar" required="false" />
        <attribute name="assignedownergroup" type="varchar" required="false" />
        <attribute name="calccalendar" type="varchar" required="false" />
        <attribute name="calcorgid" type="varchar" required="false" />
        <attribute name="calcshift" type="varchar" required="false" />
        <attribute name="changeby" type="varchar" required="true" />
        <attribute name="changedate" type="timestamp" required="true" />
        <attribute name="cinum" type="varchar" required="false" />
        <attribute name="class" type="varchar" required="true" />
        <attribute name="classificationid" type="varchar" required="false" />
        <attribute name="classstructureid" type="varchar" required="false" />
        <attribute name="commodity" type="varchar" required="false" />
        <attribute name="commoditygroup" type="varchar" required="false" />
        <attribute name="correlationattrs" type="varchar" required="false" />
        <attribute name="createdby" type="varchar" required="false" />
        <attribute name="createwomulti" type="varchar" required="false" />
        <attribute name="creationdate" type="timestamp" required="false" />
        <attribute name="description" type="varchar" required="false" />
        <attribute name="descsrvid" type="varchar" required="false" />
        <attribute name="externalrecid" type="varchar" required="false" />
        <attribute name="externalsystem" type="varchar" required="false" />
        <attribute name="externalsystem_ticketid" type="varchar" required="false" />
        <attribute name="failurecode" type="varchar" required="false" />
        <attribute name="fr1code" type="varchar" required="false" />
        <attribute name="fr2code" type="varchar" required="false" />
        <attribute name="glaccount" type="varchar" required="false" />
        <attribute name="globalticketclass" type="varchar" required="false" />
        <attribute name="globalticketid" type="varchar" required="false" />
        <attribute name="hasactivity" type="integer" required="true" />
        <attribute name="hasld" type="integer" required="true" />
        <attribute name="hassolution" type="integer" required="true" />
        <attribute name="historyflag" type="integer" required="true" />
        <attribute name="impact" type="integer" required="false" />
        <attribute name="indicatedpriority" type="integer" required="false" />
        <attribute name="inheritstatus" type="integer" required="true" />
        <attribute name="internalpriority" type="integer" required="false" />
        <attribute name="isglobal" type="integer" required="true" />
        <attribute name="isknownerror" type="integer" required="true" />
        <attribute name="isknownerrordate" type="timestamp" required="false" />
        <attribute name="langcode" type="varchar" required="true" />
        <attribute name="location" type="varchar" required="false" />
        <attribute name="orgid" type="varchar" required="false" />
        <attribute name="origrecordclass" type="varchar" required="false" />
        <attribute name="origrecordid" type="varchar" required="false" />
        <attribute name="origrecorgid" type="varchar" required="false" />
        <attribute name="origrecsiteid" type="varchar" required="false" />
        <attribute name="outageduration" type="double" required="false" />
        <attribute name="owner" type="varchar" required="false" />
        <attribute name="ownergroup" type="varchar" required="false" />
        <attribute name="pluspaddressline2" type="varchar" required="false" />
        <attribute name="pluspaddressline3" type="varchar" required="false" />
        <attribute name="pluspaddrischanged" type="integer" required="true" />
        <attribute name="pluspagreement" type="varchar" required="false" />
        <attribute name="pluspbblinenum" type="integer" required="false" />
        <attribute name="pluspbillbatch" type="varchar" required="false" />
        <attribute name="pluspcalccalnum" type="varchar" required="false" />
        <attribute name="pluspcalcorgid" type="varchar" required="false" />
        <attribute name="pluspcalcshift" type="varchar" required="false" />
        <attribute name="pluspcity" type="varchar" required="false" />
        <attribute name="pluspcostcenter" type="varchar" required="false" />
        <attribute name="pluspcountry" type="varchar" required="false" />
        <attribute name="pluspcounty" type="varchar" required="false" />
        <attribute name="pluspcustchacct" type="varchar" required="false" />
        <attribute name="pluspcustomer" type="varchar" required="false" />
        <attribute name="pluspcustponum" type="varchar" required="false" />
        <attribute name="pluspdirections" type="varchar" required="false" />
        <attribute name="pluspgeocode" type="varchar" required="false" />
        <attribute name="plusplatitude" type="decimal" required="false" />
        <attribute name="plusplongitude" type="decimal" required="false" />
        <attribute name="pluspmaxprice" type="decimal" required="false" />
        <attribute name="pluspporeq" type="integer" required="true" />
        <attribute name="plusppostalcode" type="varchar" required="false" />
        <attribute name="plusppricesched" type="varchar" required="false" />
        <attribute name="pluspquotedprice" type="decimal" required="false" />
        <attribute name="pluspquotetype" type="varchar" required="false" />
        <attribute name="plusprefpoint" type="varchar" required="false" />
        <attribute name="pluspregiondistr" type="varchar" required="false" />
        <attribute name="pluspresponseplan" type="varchar" required="false" />
        <attribute name="plusprevnum" type="integer" required="false" />
        <attribute name="pluspstaddrdirprfx" type="varchar" required="false" />
        <attribute name="pluspstaddrdirsfx" type="varchar" required="false" />
        <attribute name="pluspstaddrnumber" type="varchar" required="false" />
        <attribute name="pluspstaddrstreet" type="varchar" required="false" />
        <attribute name="pluspstaddrsttype" type="varchar" required="false" />
        <attribute name="pluspstaddrunitnum" type="varchar" required="false" />
        <attribute name="pluspstateprovince" type="varchar" required="false" />
        <attribute name="pluspstreetaddress" type="varchar" required="false" />
        <attribute name="plusptimezone" type="varchar" required="false" />
        <attribute name="pmcomimpact" type="integer" required="false" />
        <attribute name="pmcomresolution" type="varchar" required="false" />
        <attribute name="pmcomtype" type="varchar" required="false" />
        <attribute name="pmcomurgency" type="integer" required="false" />
        <attribute name="pmsccrid" type="varchar" required="false" />
        <attribute name="pmscitemnum" type="varchar" required="false" />
        <attribute name="pmscoffsummary" type="varchar" required="false" />
        <attribute name="pmscquantity" type="integer" required="false" />
        <attribute name="problemcode" type="varchar" required="false" />
        <attribute name="relatedtoglobal" type="integer" required="true" />
        <attribute name="reportdate" type="timestamp" required="false" />
        <attribute name="reportedby" type="varchar" required="false" />
        <attribute name="reportedemail" type="varchar" required="false" />
        <attribute name="reportedphone" type="varchar" required="false" />
        <attribute name="reportedpriority" type="integer" required="false" />
        <attribute name="rowstamp" type="integer" required="true" />
        <attribute name="searchsource" type="varchar" required="false" />
        <attribute name="selfservsolaccess" type="integer" required="true" />
        <attribute name="siteid" type="varchar" required="false" />
        <attribute name="sitevisit" type="integer" required="true" />
        <attribute name="solution" type="varchar" required="false" />
        <attribute name="source" type="varchar" required="false" />
        <attribute name="status" type="varchar" required="true" />
        <attribute name="statusdate" type="timestamp" required="true" />
        <attribute name="supervisor" type="varchar" required="false" />
        <attribute name="targetcontactdate" type="timestamp" required="false" />
        <attribute name="targetdesc" type="varchar" required="false" />
        <attribute name="targetfinish" type="timestamp" required="false" />
        <attribute name="targetstart" type="timestamp" required="false" />
        <attribute name="template" type="integer" required="true" />
        <attribute name="templateid" type="varchar" required="false" />
        <attribute name="ticketid" type="varchar" required="true" />
        <attribute name="ticketuid" type="bigint" required="true" />
        <attribute name="urgency" type="integer" required="false" />
        <attribute name="vendor" type="varchar" required="false" />
        <attribute name="virtualenv" type="integer" required="false" />
      </attributes>
      <relationships>
        <relationship to="asset">
          <relationshipAttribute from="assetnum" to="assetnum" primary="true"/>
          <relationshipAttribute from="siteid" to="siteid" />
        </relationship>
        <relationship to="site">
          <relationshipAttribute from="assetsiteid" to="siteid" primary="true"/>
        </relationship>
        <relationship to="location" >
          <relationshipAttribute from="location" to="location" primary="true"/>
          <relationshipAttribute from="siteid" to="siteid" />
        </relationship>
        <relationship to="worklog" collection="true">
          <relationshipAttribute from="ticketid" to="recordkey" primary="true" />
          <relationshipAttribute from="siteid" to="siteid" />
          <relationshipAttribute to="class" literal="SR" quoteLiteral="true" />
        </relationship>
        <relationship to="longdescription" >
          <relationshipAttribute from="ticketuid" to="ldkey" primary="true"/>
          <relationshipAttribute to="ldownertable" literal="TICKET" quoteLiteral="true" />
          <relationshipAttribute to="ldownercol" literal="DESCRIPTION" quoteLiteral="true" />
        </relationship>
        <relationship to="DOCLINKS" qualifier="attachment" collection="true">
          <relationshipAttribute from="ticketuid" to="ownerid" primary="true"/>
          <relationshipAttribute to="ownertable" literal="SR" quoteLiteral="true"/>
        </relationship>
        <relationship to="synonymdomain" qualifier="synstatus">
          <relationshipAttribute from="status" to="value" primary="true"/>
          <relationshipAttribute to="domainid" literal="SRSTATUS" quoteLiteral="true" />
        </relationship>
        <relationship to="person">
          <relationshipAttribute from="affectedperson" to="personid" primary="true"/>
          <relationshipAttribute to="status" literal="ACTIVE" quoteLiteral="true" />
        </relationship>
      </relationships>

      <connectorParameters>
        <!--        <connectorParameter key="audittable" value="A_WORKORDER" />-->
        <connectorParameter key="dbtable" value="SR" />
        <connectorParameter key="integration_interface" value="SWSR" />
        <connectorParameter key="customconnector" value="softWrench.sW4.Data.Persistence.WS.Commons.BaseServiceRequestCrudConnector" />
      </connectorParameters>
    </entity>
    <entity name="site" idAttribute="siteid">
      <attributes>
        <attribute name="active" type="integer" required="true" />
        <attribute name="billtoaddresscode" type="varchar" required="false" />
        <attribute name="billtolaborcode" type="varchar" required="false" />
        <attribute name="changeby" type="varchar" required="true" />
        <attribute name="changedate" type="timestamp" required="true" />
        <attribute name="contact" type="varchar" required="false" />
        <attribute name="contactgroup" type="varchar" required="false" />
        <attribute name="description" type="varchar" required="false" />
        <attribute name="enterby" type="varchar" required="false" />
        <attribute name="enterdate" type="timestamp" required="false" />
        <attribute name="hasld" type="integer" required="true" />
        <attribute name="langcode" type="varchar" required="true" />
        <attribute name="orgid" type="varchar" required="true" />
        <attribute name="rowstamp" type="integer" required="true" />
        <attribute name="shiptoaddresscode" type="varchar" required="false" />
        <attribute name="shiptolaborcode" type="varchar" required="false" />
        <attribute name="siteid" type="varchar" required="true" />
        <attribute name="siteuid" type="integer" required="true" />
      </attributes>
      <connectorParameters>
        <connectorParameter key="dbtable" value="SITE" />
      </connectorParameters>
    </entity>
    <entity name="asset" idAttribute="assetuid">
      <attributes>
        <attribute name="assetid"  type="bigint" required="true" />
        <attribute name="assetnum" type="varchar" required="true" auto-generated="true" />
        <attribute name="serialnum" type="varchar" required="true" auto-generated="true" />
        <attribute name="location" type="varchar" required="true" />
        <attribute name="vendor"  type="varchar" />
        <attribute name="description"  type="varchar" />
        <attribute name="failurecode"  type="varchar" />
        <attribute name="priority"  type="int" />
        <attribute name="siteid"  type="varchar" />
      </attributes>
      <relationships>
        <relationship to="location" >
          <relationshipAttribute from="location" to="location" primary="true"/>
          <relationshipAttribute from="siteid" to="siteid" />
        </relationship>
      </relationships>
      <connectorParameters>
        <connectorParameter key="integration_interface" value="MXSW3Asset" />
      </connectorParameters>
    </entity>
    <entity name="location" idAttribute="locationsid">
      <attributes>
        <attribute name="locationsid"  type="int" required="true" />
        <attribute name="location" type="varchar"  required="true" />
        <attribute name="description" type="varchar"  required="true" />
        <attribute name="siteid"  type="varchar" />
        <attribute name="type"  type="varchar" />
      </attributes>
      <connectorParameters>
        <connectorParameter key="dbtable" value="locations" />
      </connectorParameters>
    </entity>
    <entity name="worklog" idAttribute="worklogid" >
      <attributes>
        <attribute name="worklogid"  type="bigint" required="true" />
        <attribute name="siteid"  type="varchar" required="true" />
        <attribute name="orgid"  type="varchar" required="true" />
        <attribute name="recordkey"  type="varchar" required="true" />
        <attribute name="description"  type="varchar" required="true" />
        <attribute name="createby"  type="varchar" required="true" />
        <attribute name="createdate"  type="datetime" required="true" />
        <attribute name="class"  type="varchar" required="true" />
        <attribute name="logtype"  type="varchar" required="true" />
      </attributes>
      <relationships>
        <relationship to="longdescription" >
          <relationshipAttribute from="worklogid" to="ldkey" primary="true"/>
          <relationshipAttribute to="ldownertable" literal="WORKLOG" quoteLiteral="true" />
          <relationshipAttribute to="ldownercol" literal="DESCRIPTION" quoteLiteral="true" />
        </relationship>
      </relationships>
      <connectorParameters>
        <connectorParameter key="mea_integration_interface" value="ISW_WL" />
      </connectorParameters>
    </entity>
    <entity name="longdescription" idAttribute="longdescriptionid">
      <attributes>
        <attribute name="ldkey"   type="varchar"/>
        <attribute name="ldownertable"   type="varchar"/>
        <attribute name="ldownercol"   type="varchar"/>
        <attribute name="ldtext"   type="varchar"/>
        <attribute name="longdescriptionid"   type="varchar"/>
      </attributes>
    </entity>
    <entity name="SOLUTION" idAttribute="solutionid">
      <attributes>
        <attribute name="assetnum" type="varchar" required="false" />
        <attribute name="assetsiteid" type="varchar" required="false" />
        <attribute name="assignedownergroup" type="varchar" required="false" />
        <attribute name="avgranking" type="integer" required="false" />
        <attribute name="changeby" type="varchar" required="true" />
        <attribute name="changedate" type="timestamp" required="true" />
        <attribute name="cinum" type="varchar" required="false" />
        <attribute name="classstructureid" type="varchar" required="false" />
        <attribute name="description" type="varchar" required="false" />
        <attribute name="expdate" type="date" required="false" />
        <attribute name="extsolnid" type="varchar" required="false" />
        <attribute name="failurecode" type="varchar" required="false" />
        <attribute name="fr1code" type="varchar" required="false" />
        <attribute name="fr2code" type="varchar" required="false" />
        <attribute name="hasld" type="integer" required="true" />
        <attribute name="keywords" type="varchar" required="false" />
        <attribute name="langcode" type="varchar" required="true" />
        <attribute name="lastviewdate" type="date" required="false" />
        <attribute name="numtimesapplied" type="integer" required="false" />
        <attribute name="numtimesappliedss" type="integer" required="false" />
        <attribute name="orgid" type="varchar" required="false" />
        <attribute name="owner" type="varchar" required="false" />
        <attribute name="ownergroup" type="varchar" required="false" />
        <attribute name="pluspinsertcustomer" type="varchar" required="false" />
        <attribute name="problemcode" type="varchar" required="false" />
        <attribute name="rowstamp" type="integer" required="true" />
        <attribute name="rtcause" type="varchar" required="false" />
        <attribute name="rtcauselbl" type="varchar" required="false" />
        <attribute name="rtresoln" type="varchar" required="false" />
        <attribute name="rtresolnlbl" type="varchar" required="false" />
        <attribute name="rtsymptom" type="varchar" required="false" />
        <attribute name="rtsymptomlbl" type="varchar" required="false" />
        <attribute name="searchsource" type="varchar" required="false" />
        <attribute name="selfservaccess" type="integer" required="true" />
        <attribute name="solnauthor" type="varchar" required="false" />
        <attribute name="solution" type="varchar" required="true" />
        <attribute name="solutionid" type="integer" required="true" />
        <attribute name="status" type="varchar" required="true" />
        <attribute name="statusdate" type="timestamp" required="false" />
        <attribute name="type" type="varchar" required="false" />
      </attributes>
      <relationships>
        <relationship to="longdescription" qualifier="symptom">
          <relationshipAttribute from="solutionid" to="ldkey" primary="true"/>
          <relationshipAttribute to="ldownertable" literal="SOLUTION" quoteLiteral="true" />
          <relationshipAttribute to="ldownercol" literal="PROBLEMCODE" quoteLiteral="true" />
        </relationship>
        <relationship to="longdescription" qualifier="cause">
          <relationshipAttribute from="solutionid" to="ldkey" primary="true"/>
          <relationshipAttribute to="ldownertable" literal="SOLUTION" quoteLiteral="true" />
          <relationshipAttribute to="ldownercol" literal="FR1CODE" quoteLiteral="true" />
        </relationship>
        <relationship to="longdescription" qualifier="resolution">
          <relationshipAttribute from="solutionid" to="ldkey" primary="true"/>
          <relationshipAttribute to="ldownertable" literal="SOLUTION" quoteLiteral="true" />
          <relationshipAttribute to="ldownercol" literal="FR2CODE" quoteLiteral="true" />
        </relationship>
        <relationship to="DOCLINKS" qualifier="attachment" collection="true">
          <relationshipAttribute from="solutionid" to="ownerid" primary="true"/>
          <relationshipAttribute to="ownertable" literal="SOLUTION" quoteLiteral="true"/>
        </relationship>
      </relationships>
      <connectorParameters>
        <connectorParameter key="dbtable" value="SOLUTION" />
      </connectorParameters>
    </entity>

    <entity name="person" idAttribute="personuid">
      <attributes>
        <attribute name="personid" type="varchar" required="true" />
        <attribute name="status" type="varchar" required="true" />
        <attribute name="displayname" type="varchar" required="false" />
        <attribute name="firstname" type="varchar" required="false" />
        <attribute name="lastname" type="varchar" required="false" />
        <attribute name="department" type="varchar" required="false" />
        <attribute name="title" type="varchar" required="false" />
        <attribute name="employeetype" type="varchar" required="false" />
        <attribute name="jobcode" type="varchar" required="false" />
        <attribute name="supervisor" type="varchar" required="false" />
        <attribute name="birthdate" type="datetime" required="false" />
        <attribute name="lastevaldate" type="datetime" required="false" />
        <attribute name="nextevaldate" type="datetime" required="false" />
        <attribute name="hiredate" type="datetime" required="false" />
        <attribute name="terminationdate" type="datetime" required="false" />
        <attribute name="location" type="varchar" required="false" />
        <attribute name="locationsite" type="varchar" required="false" />
        <attribute name="locationorg" type="varchar" required="false" />
        <attribute name="shiptoaddress" type="varchar" required="false" />
        <attribute name="billtoaddress" type="varchar" required="false" />
        <attribute name="droppoint" type="varchar" required="false" />
        <attribute name="wfmailelection" type="varchar" required="false" />
        <attribute name="transemailelection" type="varchar" required="true" />
        <attribute name="delegate" type="varchar" required="false" />
        <attribute name="delegatefromdate" type="datetime" required="false" />
        <attribute name="delegatetodate" type="datetime" required="false" />
        <attribute name="pcardnum" type="varchar" required="false" />
        <attribute name="pcardtype" type="varchar" required="false" />
        <attribute name="pcardexpdate" type="varchar" required="false" />
        <attribute name="pcardverification" type="varchar" required="false" />
        <attribute name="addressline1" type="varchar" required="false" />
        <attribute name="addressline2" type="varchar" required="false" />
        <attribute name="addressline3" type="varchar" required="false" />
        <attribute name="city" type="varchar" required="false" />
        <attribute name="regiondistrict" type="varchar" required="false" />
        <attribute name="county" type="varchar" required="false" />
        <attribute name="stateprovince" type="varchar" required="false" />
        <attribute name="country" type="varchar" required="false" />
        <attribute name="postalcode" type="varchar" required="false" />
        <attribute name="vip" type="int" required="false" />
        <attribute name="statusdate" type="datetime" required="true" />
        <attribute name="acceptingwfmail" type="smallint" required="true" />
        <attribute name="wopriority" type="int" required="false" />
        <attribute name="loctoservreq" type="smallint" required="true" />
        <attribute name="personuid" type="bigint" required="true" />
        <attribute name="langcode" type="varchar" required="true" />
        <attribute name="sendersysid" type="varchar" required="false" />
        <attribute name="sourcesysid" type="varchar" required="false" />
        <attribute name="ownersysid" type="varchar" required="false" />
        <attribute name="externalrefid" type="varchar" required="false" />
        <attribute name="language" type="varchar" required="false" />
        <attribute name="locale" type="varchar" required="false" />
        <attribute name="timezone" type="varchar" required="false" />
        <attribute name="hasld" type="smallint" required="true" />
        <attribute name="primarysms" type="varchar" required="false" />
        <attribute name="ownergroup" type="varchar" required="false" />
        <attribute name="im_id" type="varchar" required="false" />
        <attribute name="caltype" type="varchar" required="false" />
        <attribute name="rowstamp" type="int" required="true" />
        <attribute name="dfltapp" type="varchar" required="false" />
        <attribute name="deviceclass" type="smallint" required="false" />
      </attributes>
      <connectorParameters>
        <connectorParameter key="dbtable" value="person" />
      </connectorParameters>
    </entity>

  </entities>

  <applications>
    <application entity="SR" name="servicerequest" title="Service Request">
      <schemas>
        <list title="Service Request Grid">
          <field attribute="ticketid" label="Request #">
            <renderer type="default" params="minwidth=110px" />
          </field>
          <field attribute="description" label="Summary">
            <renderer type="default" params="excelwidth=50" />
          </field>
          <field attribute="reportedby" label="Reported By">
            <renderer type="default" params="minwidth=150px" />
          </field>
          <field attribute="status" label="Status">
            <renderer type="default" params="minwidth=150px" />
          </field>
          <field attribute="affectedperson" label="Affected Person">
            <renderer type="default" params="minwidth=150px" />
          </field>
          <properties>
            <property key="list.click.schema" value="editdetail"/>
          </properties>
        </list>

        <schema id="adetail" title="Request Details" abstract="true" stereotype="detail">
          
          <section id="siteidsection"/>
          <field attribute="ticketuid" label="Request #" hidden="true"/>
          <field attribute="class" label="" hidden="true"/>
          <field attribute="actlabcost" hidden="true" />
          <field attribute="actlabhrs" hidden="true"/>
          <field attribute="siteid" hidden="true" />
          <field attribute="orgid" hidden="true"/>
          <field attribute="createby" hidden="true"/>

          <field attribute="owner" label="Owner" readonly="true" hidden="true"/>

          <section id="statussection"/>

          <field attribute="reportedby" label="Reported By" default="@username" readonly="true"/>
          <association label="Affected Person" target="affectedperson" labelfield="person_.displayname" default="@username">
            <renderer type="lookup"/>
          </association>
          <field attribute="description" label="Summary" requiredexpression="true"/>
          <field label="Details" attribute="longdescription_.ldtext" requiredexpression="true">
            <renderer type="textarea"/>
          </field>
          <association label="Asset" target="assetnum" labelfield="asset_.description" extraprojectionvalues="location,location_.description">
            <renderer type="lookup"/>
          </association>

          <field attribute="asset_.location" attributeToServer="location" hidden="true" />
          <field label="Location" attribute="location_.description" readonly="true" />

          <section id="compositions"/>
        </schema>

        <schema parentschema="adetail" title="New Service Request" id="newdetail">
          <section id="siteidsection">
            <field attribute="ticketid" label="Request #" hidden="true"/>
            <association label="Site" target="siteid" labelfield="site_.description"  requiredexpression="true">
              <renderer type="lookup"/>
            </association>
          </section>
          
          <section id="statussection">
            <field label="Status" attribute="status" readonly="true" default="NEW" hidden="true"/>
          </section>
        </schema>

        <schema parentschema="adetail" id="editdetail" title="Service Request Detail">
          <section id="siteidsection">
            <field attribute="ticketid" label="Request #" readonly="true"/>
            <field label="Site" attribute="siteid" readonly="true"/>
          </section>

          <section id="statussection">
            <association label="Status" target="status" labelfield="synstatus.description">
              <renderer type="combo" />
            </association>
          </section>

          <section id="compositions">
            <composition relationship="worklog" label="Work Logs"/>
            <composition relationship="attachment" label="Attachments">
              <collectionproperties prefilterfunction="BuildRelatedAttachmentsWhereClause"/>
            </composition>
          </section>

          <commands>
            <command id="crud_delete" label="Delete" service="crudextraService" method="deletefn" parameters="schema,datamap"
                     showexpression="@status=='NEW'" successmessage="SR deleted"/>
          </commands>
        </schema>



      </schemas>

    </application>

    <application name="asset" title="Asset" entity="asset" id="00000000-0000-0000-0000-000000000001" >
      <properties>
        <property key="mobile.fetchlimit" value="30"/>
        <property key="mobile.userInteractionEnabled" value="false"/>
      </properties>
      <schemas>
        <list>
          <field attribute="assetnum" label="Asset" qualifier="title"/>
          <field attribute="location" label="Location" qualifier="subtitle"/>
          <field attribute="vendor" label="Vendor"  qualifier="featured"/>
        </list>
        <detail>
          <field attribute="assetid" label="ID"  requiredexpression="true" />
          <field attribute="assetnum" label="Asset"  requiredexpression="true" />
          <field attribute="location" label="Location"  requiredexpression="true" />
          <field attribute="vendor" label="Vendor"  />
          <field attribute="description" label="Description"  />
          <field attribute="failurecode" label="Failure Code"  />
          <field attribute="priority" label="Priority"  />
          <field attribute="siteid"  requiredexpression="true" readonly="true" hidden="true"/>
        </detail>
      </schemas>

    </application>

    <application name="location" title="Location" entity="location" id="00000000-0000-0000-0000-000000000002">
      <properties>
        <property key="mobile.fetchlimit" value="16000"/>
        <property key="mobile.userInteractionEnabled" value="false"/>
      </properties>
      <schemas>
        <list >
          <field attribute="location" label="Location" qualifier="title"/>
          <field attribute="description" label="Description" qualifier="excerpt"/>
        </list>
        <detail>
          <field attribute="locationsid" label="ID"  requiredexpression="true" />
          <field attribute="location" label="Location"  requiredexpression="true" />
          <field attribute="description" label="Description"  requiredexpression="true" />
          <field attribute="siteid"  requiredexpression="true" readonly="true" hidden="true"/>
          <field attribute="type"  requiredexpression="true" readonly="true" hidden="true"/>
        </detail>
      </schemas>
    </application>

    <!--    Record Key Class Created By Created Date Log Type Summary-->
    <application name="worklog" title="Work Logs" entity="worklog" id="00000000-0000-0000-0000-000000000008" >
      <schemas>
        <schema id="list" stereotype="compositionlist">
          <field  attribute="worklogid" hidden="true"/>
          <field  attribute="recordkey" label="Record Key" hidden="true" />
          <field  attribute="class" label="Class" hidden="true" />
          <field  attribute="createby" label="Created By" />
          <field  attribute="createdate" label="Created Date">
            <renderer type="datetime" params="format=MM/dd/yyyy"/>
          </field>

          <field  attribute="logtype" label="Log Type" hidden="true" />
          <field  attribute="description" label="Summary" />
          <field  attribute="longdescription_.ldtext" label="Details" hidden="true" />
        </schema>
        <detail stereotype="compositiondetail">
          <field  attribute="description" label="Summary" />
          <field  attribute="longdescription_.ldtext" label="Details" >
            <renderer type="textarea"/>
          </field>
        </detail>
      </schemas>
    </application>

    <application name="attachment" title="Attachments" entity="DOCLINKS">
      <schemas>
        <schema id="list" stereotype="compositionlist">
          <properties>
            <property key="detail.cancel.lbl" value="Close"/>
            <property key="expansible" value="false"/>
          </properties>
          <field label="Id" hidden="true" attribute="docinfoid"/>
          <field hidden="true" attribute="doclinksid"/>
          <field label="Document" hidden="true" attribute="document"/>
          <section attribute="document"
														   resourcepath="/Content/Templates/downloadattachment.html" parameters="controller=Attachment;action=Download;idcolumn=docinfoid;mode=http">
            <header label="Document"/>
          </section>
          
          <field label="Created Date" attribute="createdate"/>
        </schema>

        <detail>
          <field label="Attachment:" attribute="newattachment" >
            <renderer type="upload"/>
          </field>
          <!--wip-->
          <!--          <field label="ScreenShot:" attribute="reportedby">-->
          <!--            <renderer type="screenshot"/>-->
          <!--          </field>-->
        </detail>

      </schemas>
    </application>

    <application name="longdescription" title="Long Description" entity="longdescription" id="00000000-0000-0000-0000-000000000007">
      <properties>
        <property key="mobile.userInteractionEnabled" value="false"/>
        <property key="mobile.fetchlimit" value="30"/>
      </properties>
      <schemas>
        <detail>
          <field attribute="ldkey"  />
          <field attribute="ldownertable"  />
          <field attribute="ldownercol"  />
          <field attribute="ldtext"  />
          <field attribute="longdescriptionid"  />
        </detail>
      </schemas>
    </application>

 

  </applications>
</metadata>